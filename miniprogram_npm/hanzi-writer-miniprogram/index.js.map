{"version":3,"sources":["hanzi-writer.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["/*!\r\n * Hanzi Writer v2.3.0\r\n * https://chanind.github.io/hanzi-writer\r\n */\r\n(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine([], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"HanziWriter\"] = factory();\r\n\telse\r\n\t\troot[\"HanziWriter\"] = factory();\r\n})(typeof self !== 'undefined' ? self : this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = 9);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n/* WEBPACK VAR INJECTION */(function(global) {\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\r\nfunction emptyFunc() {}\r\n\r\nvar performanceNow = global.performance && function () {\r\n  return global.performance.now();\r\n} || function () {\r\n  return Date.now();\r\n};\r\nvar requestAnimationFrame = global.requestAnimationFrame || function (callback) {\r\n  return setTimeout(function () {\r\n    return callback(performanceNow());\r\n  }, 1000 / 60);\r\n};\r\nvar cancelAnimationFrame = global.cancelAnimationFrame || clearTimeout;\r\n\r\n// Object.assign polyfill, because IE :/\r\nvar _assign = function _assign(target) {\r\n  var overrideTarget = Object(target);\r\n\r\n  for (var _len = arguments.length, overrides = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n    overrides[_key - 1] = arguments[_key];\r\n  }\r\n\r\n  overrides.forEach(function (override) {\r\n    if (override != null) {\r\n      for (var key in override) {\r\n        if (Object.prototype.hasOwnProperty.call(override, key)) {\r\n          overrideTarget[key] = override[key];\r\n        }\r\n      }\r\n    }\r\n  });\r\n  return overrideTarget;\r\n};\r\n\r\nvar assign = Object.assign || _assign;\r\n\r\nvar arrLast = function arrLast(arr) {\r\n  return arr[arr.length - 1];\r\n};\r\n\r\nfunction copyAndMergeDeep(base, override) {\r\n  var output = assign({}, base);\r\n  for (var key in override) {\r\n    // eslint-disable-line guard-for-in\r\n    // skipping hasOwnProperty check for performance reasons - we shouldn't be passing any objects\r\n    // in here that aren't plain objects anyway and this is a hot code path\r\n    var baseVal = base[key];\r\n    var overrideVal = override[key];\r\n    if (baseVal === overrideVal) continue; // eslint-disable-line no-continue\r\n    if (baseVal && overrideVal && (typeof baseVal === 'undefined' ? 'undefined' : _typeof(baseVal)) === 'object' && (typeof overrideVal === 'undefined' ? 'undefined' : _typeof(overrideVal)) === 'object' && !Array.isArray(overrideVal)) {\r\n      output[key] = copyAndMergeDeep(baseVal, overrideVal);\r\n    } else {\r\n      output[key] = overrideVal;\r\n    }\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction inflate(scope, obj) {\r\n  var parts = scope.split('.');\r\n  var final = {};\r\n  var current = final;\r\n  for (var i = 0; i < parts.length; i++) {\r\n    var cap = i === parts.length - 1 ? obj : {};\r\n    current[parts[i]] = cap;\r\n    current = cap;\r\n  }\r\n  return final;\r\n}\r\n\r\nfunction callIfExists(callback, arg) {\r\n  if (callback) callback(arg);\r\n  return arg;\r\n}\r\n\r\nvar count = 0;\r\nfunction counter() {\r\n  count++;\r\n  return count;\r\n}\r\n\r\nfunction average(arr) {\r\n  var sum = arr.reduce(function (acc, val) {\r\n    return val + acc;\r\n  }, 0);\r\n  return sum / arr.length;\r\n}\r\n\r\nfunction timeout() {\r\n  var duration = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\r\n\r\n  return new Promise(function (resolve, reject) {\r\n    setTimeout(resolve, duration);\r\n  });\r\n}\r\n\r\nfunction colorStringToVals(colorString) {\r\n  var normalizedColor = colorString.toUpperCase().trim();\r\n  // based on https://stackoverflow.com/a/21648508\r\n  if (/^#([A-F0-9]{3}){1,2}$/.test(normalizedColor)) {\r\n    var hexParts = normalizedColor.substring(1).split('');\r\n    if (hexParts.length === 3) {\r\n      hexParts = [hexParts[0], hexParts[0], hexParts[1], hexParts[1], hexParts[2], hexParts[2]];\r\n    }\r\n    var hexStr = '' + hexParts.join('');\r\n    return {\r\n      r: parseInt(hexStr.slice(0, 2), 16),\r\n      g: parseInt(hexStr.slice(2, 4), 16),\r\n      b: parseInt(hexStr.slice(4, 6), 16),\r\n      a: 1\r\n    };\r\n  }\r\n  var rgbMatch = normalizedColor.match(/^RGBA?\\((\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)(?:\\s*,\\s*(\\d*\\.?\\d+))?\\)$/);\r\n  if (rgbMatch) {\r\n    return {\r\n      r: parseInt(rgbMatch[1], 10),\r\n      g: parseInt(rgbMatch[2], 10),\r\n      b: parseInt(rgbMatch[3], 10),\r\n      a: parseFloat(rgbMatch[4] || 1, 10)\r\n    };\r\n  }\r\n  throw new Error('Invalid color: ' + colorString);\r\n}\r\n\r\nvar trim = function trim(string) {\r\n  return string.replace(/^\\s+/, '').replace(/\\s+$/, '');\r\n};\r\n\r\n// return a new array-like object with int keys where each key is item\r\n// ex: objRepeat({x: 8}, 3) === {0: {x: 8}, 1: {x: 8}, 2: {x: 8}}\r\nvar objRepeat = function objRepeat(item, times) {\r\n  var obj = {};\r\n  for (var i = 0; i < times; i++) {\r\n    obj[i] = item;\r\n  }\r\n  return obj;\r\n};\r\n\r\nvar ua = global.navigator && global.navigator.userAgent || '';\r\nvar isMsBrowser = ua.indexOf('MSIE ') > 0 || ua.indexOf('Trident/') > 0 || ua.indexOf('Edge/') > 0;\r\n\r\nmodule.exports = {\r\n  _assign: _assign,\r\n  arrLast: arrLast,\r\n  assign: assign,\r\n  average: average,\r\n  callIfExists: callIfExists,\r\n  cancelAnimationFrame: cancelAnimationFrame,\r\n  colorStringToVals: colorStringToVals,\r\n  copyAndMergeDeep: copyAndMergeDeep,\r\n  counter: counter,\r\n  emptyFunc: emptyFunc,\r\n  inflate: inflate,\r\n  objRepeat: objRepeat,\r\n  performanceNow: performanceNow,\r\n  requestAnimationFrame: requestAnimationFrame,\r\n  timeout: timeout,\r\n  trim: trim,\r\n  isMsBrowser: isMsBrowser\r\n};\r\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports) {\r\n\r\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\r\n\r\n/***/ }),\r\n/* 2 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar _require = __webpack_require__(0),\r\n    average = _require.average,\r\n    arrLast = _require.arrLast;\r\n\r\nvar subtract = function subtract(p1, p2) {\r\n  return { x: p1.x - p2.x, y: p1.y - p2.y };\r\n};\r\nvar magnitude = function magnitude(point) {\r\n  return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\r\n};\r\nvar distance = function distance(point1, point2) {\r\n  return magnitude(subtract(point1, point2));\r\n};\r\nvar equals = function equals(point1, point2) {\r\n  return point1.x === point2.x && point1.y === point2.y;\r\n};\r\nvar round = function round(point) {\r\n  var precision = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\r\n\r\n  var multiplier = precision * 10;\r\n  return {\r\n    x: Math.round(multiplier * point.x) / multiplier,\r\n    y: Math.round(multiplier * point.y) / multiplier\r\n  };\r\n};\r\n\r\nvar length = function length(points) {\r\n  var lastPoint = points[0];\r\n  var pointsSansFirst = points.slice(1);\r\n  return pointsSansFirst.reduce(function (acc, point) {\r\n    var dist = distance(point, lastPoint);\r\n    lastPoint = point;\r\n    return acc + dist;\r\n  }, 0);\r\n};\r\n\r\nvar cosineSimilarity = function cosineSimilarity(point1, point2) {\r\n  var rawDotProduct = point1.x * point2.x + point1.y * point2.y;\r\n  return rawDotProduct / magnitude(point1) / magnitude(point2);\r\n};\r\n\r\n// return a new point, p3, which is on the same line as p1 and p2, but distance away\r\n// from p2. p1, p2, p3 will always lie on the line in that order\r\nvar _extendPointOnLine = function _extendPointOnLine(p1, p2, dist) {\r\n  var vect = subtract(p2, p1);\r\n  var norm = dist / magnitude(vect);\r\n  return { x: p2.x + norm * vect.x, y: p2.y + norm * vect.y };\r\n};\r\n\r\n// based on http://www.kr.tuwien.ac.at/staff/eiter/et-archive/cdtr9464.pdf\r\nvar frechetDist = function frechetDist(curve1, curve2) {\r\n  var results = [];\r\n  for (var i = 0; i < curve1.length; i++) {\r\n    results.push([]);\r\n    for (var j = 0; j < curve2.length; j++) {\r\n      results[i].push(-1);\r\n    }\r\n  }\r\n\r\n  var recursiveCalc = function recursiveCalc(i, j) {\r\n    if (results[i][j] > -1) return results[i][j];\r\n    if (i === 0 && j === 0) {\r\n      results[i][j] = distance(curve1[0], curve2[0]);\r\n    } else if (i > 0 && j === 0) {\r\n      results[i][j] = Math.max(recursiveCalc(i - 1, 0), distance(curve1[i], curve2[0]));\r\n    } else if (i === 0 && j > 0) {\r\n      results[i][j] = Math.max(recursiveCalc(0, j - 1), distance(curve1[0], curve2[j]));\r\n    } else if (i > 0 && j > 0) {\r\n      results[i][j] = Math.max(Math.min(recursiveCalc(i - 1, j), recursiveCalc(i - 1, j - 1), recursiveCalc(i, j - 1)), distance(curve1[i], curve2[j]));\r\n    } else {\r\n      results[i][j] = Infinity;\r\n    }\r\n    return results[i][j];\r\n  };\r\n\r\n  return recursiveCalc(curve1.length - 1, curve2.length - 1);\r\n};\r\n\r\n// break up long segments in the curve into smaller segments of len maxLen or smaller\r\nvar subdivideCurve = function subdivideCurve(curve) {\r\n  var maxLen = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.05;\r\n\r\n  var newCurve = curve.slice(0, 1);\r\n  curve.slice(1).forEach(function (point) {\r\n    var prevPoint = newCurve[newCurve.length - 1];\r\n    var segLen = distance(point, prevPoint);\r\n    if (segLen > maxLen) {\r\n      var numNewPoints = Math.ceil(segLen / maxLen);\r\n      var newSegLen = segLen / numNewPoints;\r\n      for (var i = 0; i < numNewPoints; i++) {\r\n        newCurve.push(_extendPointOnLine(point, prevPoint, -1 * newSegLen * (i + 1)));\r\n      }\r\n    } else {\r\n      newCurve.push(point);\r\n    }\r\n  });\r\n  return newCurve;\r\n};\r\n\r\n// redraw the curve using numPoints equally spaced out along the length of the curve\r\nvar outlineCurve = function outlineCurve(curve) {\r\n  var numPoints = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 30;\r\n\r\n  var curveLen = length(curve);\r\n  var segmentLen = curveLen / (numPoints - 1);\r\n  var outlinePoints = [curve[0]];\r\n  var endPoint = arrLast(curve);\r\n  var remainingCurvePoints = curve.slice(1);\r\n  for (var i = 0; i < numPoints - 2; i++) {\r\n    var lastPoint = arrLast(outlinePoints);\r\n    var remainingDist = segmentLen;\r\n    var outlinePointFound = false;\r\n    while (!outlinePointFound) {\r\n      var nextPointDist = distance(lastPoint, remainingCurvePoints[0]);\r\n      if (nextPointDist < remainingDist) {\r\n        remainingDist -= nextPointDist;\r\n        lastPoint = remainingCurvePoints.shift();\r\n      } else {\r\n        var nextPoint = _extendPointOnLine(lastPoint, remainingCurvePoints[0], remainingDist - nextPointDist);\r\n        outlinePoints.push(nextPoint);\r\n        outlinePointFound = true;\r\n      }\r\n    }\r\n  }\r\n  outlinePoints.push(endPoint);\r\n  return outlinePoints;\r\n};\r\n\r\n// translate and scale from https://en.wikipedia.org/wiki/Procrustes_analysis\r\nvar normalizeCurve = function normalizeCurve(curve) {\r\n  var outlinedCurve = outlineCurve(curve);\r\n  var meanX = average(outlinedCurve.map(function (point) {\r\n    return point.x;\r\n  }));\r\n  var meanY = average(outlinedCurve.map(function (point) {\r\n    return point.y;\r\n  }));\r\n  var mean = { x: meanX, y: meanY };\r\n  var translatedCurve = outlinedCurve.map(function (point) {\r\n    return subtract(point, mean);\r\n  });\r\n  var scale = Math.sqrt(average([Math.pow(translatedCurve[0].x, 2) + Math.pow(translatedCurve[0].y, 2), Math.pow(arrLast(translatedCurve).x, 2) + Math.pow(arrLast(translatedCurve).y, 2)]));\r\n  var scaledCurve = translatedCurve.map(function (point) {\r\n    return { x: point.x / scale, y: point.y / scale };\r\n  });\r\n  return subdivideCurve(scaledCurve);\r\n};\r\n\r\n// rotate around the origin\r\nvar rotate = function rotate(curve, theta) {\r\n  return curve.map(function (point) {\r\n    return {\r\n      x: Math.cos(theta) * point.x - Math.sin(theta) * point.y,\r\n      y: Math.sin(theta) * point.x + Math.cos(theta) * point.y\r\n    };\r\n  });\r\n};\r\n\r\n// remove intermediate points that are on the same line as the points to either side\r\nvar _filterParallelPoints = function _filterParallelPoints(points) {\r\n  if (points.length < 3) return points;\r\n  var filteredPoints = [points[0], points[1]];\r\n  points.slice(2).forEach(function (point, i) {\r\n    var numFilteredPoints = filteredPoints.length;\r\n    var curVect = subtract(point, filteredPoints[numFilteredPoints - 1]);\r\n    var prevVect = subtract(filteredPoints[numFilteredPoints - 1], filteredPoints[numFilteredPoints - 2]);\r\n    // this is the z coord of the cross-product. If this is 0 then they're parallel\r\n    var isParallel = curVect.y * prevVect.x - curVect.x * prevVect.y === 0;\r\n    if (isParallel) {\r\n      filteredPoints.pop();\r\n    }\r\n    filteredPoints.push(point);\r\n  });\r\n  return filteredPoints;\r\n};\r\n\r\nfunction getPathString(points) {\r\n  var close = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\r\n\r\n  var start = round(points[0]);\r\n  var remainingPoints = points.slice(1);\r\n  var pathString = 'M ' + start.x + ' ' + start.y;\r\n  remainingPoints.forEach(function (point) {\r\n    var roundedPoint = round(point);\r\n    pathString += ' L ' + roundedPoint.x + ' ' + roundedPoint.y;\r\n  });\r\n  if (close) pathString += 'Z';\r\n  return pathString;\r\n}\r\n\r\n// take points on a path and move their start point backwards by distance\r\nvar extendStart = function extendStart(points, dist) {\r\n  var filteredPoints = _filterParallelPoints(points);\r\n  if (filteredPoints.length < 2) return filteredPoints;\r\n  var p1 = filteredPoints[1];\r\n  var p2 = filteredPoints[0];\r\n  var newStart = _extendPointOnLine(p1, p2, dist);\r\n  var extendedPoints = filteredPoints.slice(1);\r\n  extendedPoints.unshift(newStart);\r\n  return extendedPoints;\r\n};\r\n\r\nmodule.exports = {\r\n  round: round,\r\n  equals: equals,\r\n  distance: distance,\r\n  getPathString: getPathString,\r\n  frechetDist: frechetDist,\r\n  length: length,\r\n  rotate: rotate,\r\n  subtract: subtract,\r\n  extendStart: extendStart,\r\n  cosineSimilarity: cosineSimilarity,\r\n  outlineCurve: outlineCurve,\r\n  _extendPointOnLine: _extendPointOnLine,\r\n  _filterParallelPoints: _filterParallelPoints,\r\n  subdivideCurve: subdivideCurve,\r\n  normalizeCurve: normalizeCurve\r\n};\r\n\r\n/***/ }),\r\n/* 3 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n/* WEBPACK VAR INJECTION */(function(global) {\r\n\r\nfunction createElm(elmType) {\r\n  return global.document.createElementNS('http://www.w3.org/2000/svg', elmType);\r\n}\r\n\r\nfunction attr(elm, name, value) {\r\n  elm.setAttributeNS(null, name, value);\r\n}\r\n\r\nfunction attrs(elm, attrsMap) {\r\n  Object.keys(attrsMap).forEach(function (attrName) {\r\n    return attr(elm, attrName, attrsMap[attrName]);\r\n  });\r\n}\r\n\r\n// inspired by https://talk.observablehq.com/t/hanzi-writer-renders-incorrectly-inside-an-observable-notebook-on-a-mobile-browser/1898\r\nfunction urlIdRef(id) {\r\n  var prefix = '';\r\n  if (global.location && global.location.href) {\r\n    prefix = global.location.href.replace(/#[^#]*$/, '');\r\n  }\r\n  return 'url(' + prefix + '#' + id + ')';\r\n}\r\n\r\nfunction removeElm(elm) {\r\n  if (elm) elm.parentNode.removeChild(elm);\r\n}\r\n\r\nmodule.exports = { createElm: createElm, attrs: attrs, attr: attr, removeElm: removeElm, urlIdRef: urlIdRef };\r\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\r\n\r\n/***/ }),\r\n/* 4 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n\r\nvar Mutation = __webpack_require__(5);\r\n\r\nvar _require = __webpack_require__(0),\r\n    objRepeat = _require.objRepeat;\r\n\r\nvar showStrokes = function showStrokes(charName, character, duration) {\r\n  return [new Mutation('character.' + charName + '.strokes', objRepeat({ opacity: 1, displayPortion: 1 }, character.strokes.length), { duration: duration, force: true })];\r\n};\r\n\r\nvar showCharacter = function showCharacter(charName, character, duration) {\r\n  return [new Mutation('character.' + charName, {\r\n    opacity: 1,\r\n    strokes: objRepeat({ opacity: 1, displayPortion: 1 }, character.strokes.length)\r\n  }, { duration: duration, force: true })];\r\n};\r\n\r\nvar hideCharacter = function hideCharacter(charName, character, duration) {\r\n  return [new Mutation('character.' + charName + '.opacity', 0, { duration: duration, force: true })].concat(showStrokes(charName, character, 0));\r\n};\r\n\r\nvar updateColor = function updateColor(colorName, colorVal, duration) {\r\n  return [new Mutation('options.' + colorName, colorVal, { duration: duration })];\r\n};\r\n\r\nvar highlightStroke = function highlightStroke(stroke, color, speed) {\r\n  var strokeNum = stroke.strokeNum;\r\n  var duration = (stroke.getLength() + 600) / (3 * speed);\r\n  return [new Mutation('character.highlight.strokeColor', color), new Mutation('character.highlight', {\r\n    opacity: 1,\r\n    strokes: _defineProperty({}, strokeNum, {\r\n      displayPortion: 0,\r\n      opacity: 0\r\n    })\r\n  }), new Mutation('character.highlight.strokes.' + strokeNum, {\r\n    displayPortion: 1,\r\n    opacity: 1\r\n  }, { duration: duration }), new Mutation('character.highlight.strokes.' + strokeNum + '.opacity', 0, { duration: duration })];\r\n};\r\n\r\nvar animateStroke = function animateStroke(charName, stroke, speed) {\r\n  var strokeNum = stroke.strokeNum;\r\n  var duration = (stroke.getLength() + 600) / (3 * speed);\r\n  return [new Mutation('character.' + charName, {\r\n    opacity: 1,\r\n    strokes: _defineProperty({}, strokeNum, {\r\n      displayPortion: 0,\r\n      opacity: 1\r\n    })\r\n  }), new Mutation('character.' + charName + '.strokes.' + strokeNum + '.displayPortion', 1, { duration: duration })];\r\n};\r\n\r\nvar animateSingleStroke = function animateSingleStroke(charName, character, strokeNum, speed) {\r\n  var mutationStateFunc = function mutationStateFunc(state) {\r\n    var curCharState = state.character[charName];\r\n    var mutationState = {\r\n      opacity: 1,\r\n      strokes: {}\r\n    };\r\n    for (var i = 0; i < character.strokes.length; i++) {\r\n      mutationState.strokes[i] = {\r\n        opacity: curCharState.opacity * curCharState.strokes[i].opacity\r\n      };\r\n    }\r\n    return mutationState;\r\n  };\r\n  return [new Mutation('character.' + charName, mutationStateFunc)].concat(animateStroke(charName, character.strokes[strokeNum], speed));\r\n};\r\n\r\nvar showStroke = function showStroke(charName, strokeNum, duration) {\r\n  return [new Mutation('character.' + charName + '.strokes.' + strokeNum, {\r\n    displayPortion: 1,\r\n    opacity: 1\r\n  }, { duration: duration, force: true })];\r\n};\r\n\r\nvar animateCharacter = function animateCharacter(charName, character, fadeDuration, speed, delayBetweenStrokes) {\r\n  var mutations = hideCharacter(charName, character, fadeDuration);\r\n  mutations = mutations.concat(showStrokes(charName, character, 0));\r\n  mutations.push(new Mutation('character.' + charName, {\r\n    opacity: 1,\r\n    strokes: objRepeat({ opacity: 0 }, character.strokes.length)\r\n  }, { force: true }));\r\n  character.strokes.forEach(function (stroke, i) {\r\n    if (i > 0) mutations.push(new Mutation.Delay(delayBetweenStrokes));\r\n    mutations = mutations.concat(animateStroke(charName, stroke, speed));\r\n  });\r\n  return mutations;\r\n};\r\n\r\nvar animateCharacterLoop = function animateCharacterLoop(charName, character, fadeDuration, speed, delayBetweenStrokes, delayBetweenLoops) {\r\n  var mutations = animateCharacter(charName, character, fadeDuration, speed, delayBetweenStrokes);\r\n  mutations.push(new Mutation.Delay(delayBetweenLoops));\r\n  return mutations;\r\n};\r\n\r\nmodule.exports = {\r\n  showStrokes: showStrokes,\r\n  showCharacter: showCharacter,\r\n  hideCharacter: hideCharacter,\r\n  highlightStroke: highlightStroke,\r\n  animateCharacter: animateCharacter,\r\n  animateCharacterLoop: animateCharacterLoop,\r\n  animateStroke: animateStroke,\r\n  animateSingleStroke: animateSingleStroke,\r\n  showStroke: showStroke,\r\n  updateColor: updateColor\r\n};\r\n\r\n/***/ }),\r\n/* 5 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar _require = __webpack_require__(0),\r\n    inflate = _require.inflate,\r\n    performanceNow = _require.performanceNow,\r\n    requestAnimationFrame = _require.requestAnimationFrame,\r\n    cancelAnimationFrame = _require.cancelAnimationFrame;\r\n\r\n// ------ Mutation class --------\r\n\r\nvar getPartialValues = function getPartialValues(startValues, endValues, progress) {\r\n  var target = {};\r\n  for (var key in endValues) {\r\n    // eslint-disable-line guard-for-in\r\n    // skipping hasOwnProperty check for performance reasons - we shouldn't be passing any objects\r\n    // in here that aren't plain objects anyway and this is a hot code path\r\n    var endValue = endValues[key];\r\n    var startValue = startValues[key];\r\n    if (endValue >= 0) {\r\n      target[key] = progress * (endValue - startValue) + startValue;\r\n    } else {\r\n      target[key] = getPartialValues(startValue, endValue, progress);\r\n    }\r\n  }\r\n  return target;\r\n};\r\n\r\nvar isAlreadyAtEnd = function isAlreadyAtEnd(startValues, endValues) {\r\n  for (var key in endValues) {\r\n    if (endValues.hasOwnProperty(key)) {\r\n      var endValue = endValues[key];\r\n      var startValue = startValues[key];\r\n      if (endValue >= 0) {\r\n        if (endValue !== startValue) return false;\r\n      } else if (!isAlreadyAtEnd(startValue, endValue)) {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n  return true;\r\n};\r\n\r\n// from https://github.com/maxwellito/vivus\r\nvar ease = function ease(x) {\r\n  return -Math.cos(x * Math.PI) / 2 + 0.5;\r\n};\r\n\r\nfunction Mutation(scope, valuesOrCallable) {\r\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\r\n\r\n  this.scope = scope;\r\n  this._valuesOrCallable = valuesOrCallable;\r\n  this._duration = options.duration || 0;\r\n  this._force = options.force;\r\n  this._pausedDuration = 0;\r\n  this._tickBound = this._tick.bind(this);\r\n  this._startPauseTime = null;\r\n}\r\n\r\nMutation.prototype.run = function (renderState) {\r\n  var _this = this;\r\n\r\n  if (!this._values) this._inflateValues(renderState);\r\n  if (this._duration === 0) renderState.updateState(this._values);\r\n  if (this._duration === 0 || isAlreadyAtEnd(renderState.state, this._values)) {\r\n    return Promise.resolve();\r\n  }\r\n  this._renderState = renderState;\r\n  this._startState = renderState.state;\r\n  this._startTime = performanceNow();\r\n  this._frameHandle = requestAnimationFrame(this._tickBound);\r\n  return new Promise(function (resolve) {\r\n    _this._resolve = resolve;\r\n  });\r\n};\r\n\r\nMutation.prototype.pause = function () {\r\n  if (this._startPauseTime !== null) return;\r\n  if (this._frameHandle) cancelAnimationFrame(this._frameHandle);\r\n  this._startPauseTime = performanceNow();\r\n};\r\n\r\nMutation.prototype.resume = function () {\r\n  if (this._startPauseTime === null) return;\r\n  this._frameHandle = requestAnimationFrame(this._tickBound);\r\n  this._pausedDuration += performanceNow() - this._startPauseTime;\r\n  this._startPauseTime = null;\r\n};\r\n\r\nMutation.prototype._tick = function (timing) {\r\n  if (this._startPauseTime !== null) return;\r\n  var progress = Math.min(1, (timing - this._startTime - this._pausedDuration) / this._duration);\r\n  if (progress === 1) {\r\n    this._renderState.updateState(this._values);\r\n    this._frameHandle = null;\r\n    this.cancel(this._renderState);\r\n  } else {\r\n    var easedProgress = ease(progress);\r\n    this._renderState.updateState(getPartialValues(this._startState, this._values, easedProgress));\r\n    this._frameHandle = requestAnimationFrame(this._tickBound);\r\n  }\r\n};\r\n\r\nMutation.prototype._inflateValues = function (renderState) {\r\n  var values = this._valuesOrCallable;\r\n  if (typeof this._valuesOrCallable === 'function') {\r\n    values = this._valuesOrCallable(renderState.state);\r\n  }\r\n  this._values = inflate(this.scope, values);\r\n};\r\n\r\nMutation.prototype.cancel = function (renderState) {\r\n  if (this._resolve) this._resolve();\r\n  this._resolve = null;\r\n  if (this._frameHandle) cancelAnimationFrame(this._frameHandle);\r\n  this._frameHandle = null;\r\n  if (this._force) {\r\n    if (!this._values) this._inflateValues(renderState);\r\n    renderState.updateState(this._values);\r\n  }\r\n};\r\n\r\n// ------ Mutation.Delay Class --------\r\n\r\nfunction Delay(duration) {\r\n  this._duration = duration;\r\n  this._startTime = null;\r\n  this._paused = false;\r\n}\r\n\r\nDelay.prototype.pause = function () {\r\n  if (this._paused) return;\r\n  // to pause, clear the timeout and rewrite this._duration with whatever time is remaining\r\n  var elapsedDelay = performanceNow() - this._startTime;\r\n  this._duration = Math.max(0, this._duration - elapsedDelay);\r\n  clearTimeout(this._timeout);\r\n  this._paused = true;\r\n};\r\n\r\nDelay.prototype.resume = function () {\r\n  var _this2 = this;\r\n\r\n  if (!this._paused) return;\r\n  this._startTime = performanceNow();\r\n  this._timeout = setTimeout(function () {\r\n    return _this2.cancel();\r\n  }, this._duration);\r\n  this._paused = false;\r\n};\r\n\r\nDelay.prototype.run = function () {\r\n  var _this3 = this;\r\n\r\n  var timeoutPromise = new Promise(function (resolve) {\r\n    _this3._resolve = resolve;\r\n  });\r\n  this._startTime = performanceNow();\r\n  this._timeout = setTimeout(function () {\r\n    return _this3.cancel();\r\n  }, this._duration);\r\n  return timeoutPromise;\r\n};\r\n\r\nDelay.prototype.cancel = function () {\r\n  clearTimeout(this._timeout);\r\n  if (this._resolve) this._resolve();\r\n  this._resolve = false;\r\n};\r\n\r\nMutation.Delay = Delay;\r\n\r\n// -------------------------------------\r\n\r\n\r\nmodule.exports = Mutation;\r\n\r\n/***/ }),\r\n/* 6 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nfunction StrokeRendererBase() {}\r\n\r\nStrokeRendererBase.prototype._getStrokeDashoffset = function (displayPortion) {\r\n  return this._pathLength * 0.999 * (1 - displayPortion);\r\n};\r\n\r\nStrokeRendererBase.prototype._getColor = function (_ref) {\r\n  var strokeColor = _ref.strokeColor,\r\n      radicalColor = _ref.radicalColor;\r\n\r\n  return radicalColor && this._stroke.isInRadical ? radicalColor : strokeColor;\r\n};\r\n\r\nmodule.exports = StrokeRendererBase;\r\n\r\n/***/ }),\r\n/* 7 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n/* WEBPACK VAR INJECTION */(function(global) {\r\n\r\nfunction RenderTargetBase() {}\r\n\r\nRenderTargetBase.prototype.addPointerStartListener = function (callback) {\r\n  var _this = this;\r\n\r\n  this.node.addEventListener('mousedown', function (evt) {\r\n    callback(_this._eventify(evt, _this._getMousePoint));\r\n  });\r\n  this.node.addEventListener('touchstart', function (evt) {\r\n    callback(_this._eventify(evt, _this._getTouchPoint));\r\n  });\r\n};\r\n\r\nRenderTargetBase.prototype.addPointerMoveListener = function (callback) {\r\n  var _this2 = this;\r\n\r\n  this.node.addEventListener('mousemove', function (evt) {\r\n    callback(_this2._eventify(evt, _this2._getMousePoint));\r\n  });\r\n  this.node.addEventListener('touchmove', function (evt) {\r\n    callback(_this2._eventify(evt, _this2._getTouchPoint));\r\n  });\r\n};\r\n\r\nRenderTargetBase.prototype.addPointerEndListener = function (callback) {\r\n  // TODO: find a way to not need global listeners\r\n  global.document.addEventListener('mouseup', callback);\r\n  global.document.addEventListener('touchend', callback);\r\n};\r\n\r\nRenderTargetBase.prototype.getBoundingClientRect = function () {\r\n  return this.node.getBoundingClientRect();\r\n};\r\n\r\nRenderTargetBase.prototype._eventify = function (evt, pointFunc) {\r\n  var _this3 = this;\r\n\r\n  return {\r\n    getPoint: function getPoint() {\r\n      return pointFunc.call(_this3, evt);\r\n    },\r\n    preventDefault: function preventDefault() {\r\n      return evt.preventDefault();\r\n    }\r\n  };\r\n};\r\n\r\nRenderTargetBase.prototype._getMousePoint = function (evt) {\r\n  var box = this.getBoundingClientRect();\r\n  var x = evt.clientX - box.left;\r\n  var y = evt.clientY - box.top;\r\n  return { x: x, y: y };\r\n};\r\n\r\nRenderTargetBase.prototype._getTouchPoint = function (evt) {\r\n  var box = this.getBoundingClientRect();\r\n  var x = evt.touches[0].clientX - box.left;\r\n  var y = evt.touches[0].clientY - box.top;\r\n  return { x: x, y: y };\r\n};\r\n\r\nmodule.exports = RenderTargetBase;\r\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\r\n\r\n/***/ }),\r\n/* 8 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\r\n\r\nvar drawPath = function drawPath(ctx, points) {\r\n  ctx.beginPath();\r\n  var start = points[0];\r\n  var remainingPoints = points.slice(1);\r\n  ctx.moveTo(start.x, start.y);\r\n  remainingPoints.forEach(function (point) {\r\n    ctx.lineTo(point.x, point.y);\r\n  });\r\n  ctx.stroke();\r\n};\r\n\r\n// break a path string into a series of canvas path commands\r\n// only works with the subset of SVG paths used by MakeMeAHanzi data\r\nvar pathStringToCanvas = function pathStringToCanvas(pathString) {\r\n  var pathParts = pathString.split(/(^|\\s+)(?=[A-Z])/).filter(function (part) {\r\n    return part !== ' ';\r\n  });\r\n  var commands = [function (ctx) {\r\n    return ctx.beginPath();\r\n  }];\r\n  pathParts.forEach(function (part) {\r\n    var _part$split = part.split(/\\s+/),\r\n        _part$split2 = _toArray(_part$split),\r\n        cmd = _part$split2[0],\r\n        rawParams = _part$split2.slice(1);\r\n\r\n    var params = rawParams.map(function (param) {\r\n      return parseFloat(param);\r\n    });\r\n    if (cmd === 'M') {\r\n      commands.push(function (ctx) {\r\n        return ctx.moveTo.apply(ctx, params);\r\n      });\r\n    } else if (cmd === 'L') {\r\n      commands.push(function (ctx) {\r\n        return ctx.lineTo.apply(ctx, params);\r\n      });\r\n    } else if (cmd === 'C') {\r\n      commands.push(function (ctx) {\r\n        return ctx.bezierCurveTo.apply(ctx, params);\r\n      });\r\n    } else if (cmd === 'Q') {\r\n      commands.push(function (ctx) {\r\n        return ctx.quadraticCurveTo.apply(ctx, params);\r\n      });\r\n    } else if (cmd === 'Z') {\r\n      // commands.push((ctx) => ctx.closePath());\r\n    }\r\n  });\r\n  return function (ctx) {\r\n    return commands.forEach(function (cmd) {\r\n      return cmd(ctx);\r\n    });\r\n  };\r\n};\r\n\r\nmodule.exports = { drawPath: drawPath, pathStringToCanvas: pathStringToCanvas };\r\n\r\n/***/ }),\r\n/* 9 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar RenderState = __webpack_require__(10);\r\nvar parseCharData = __webpack_require__(11);\r\nvar Positioner = __webpack_require__(14);\r\nvar Quiz = __webpack_require__(15);\r\nvar svgRenderer = __webpack_require__(19);\r\nvar canvasRenderer = __webpack_require__(25);\r\nvar defaultCharDataLoader = __webpack_require__(31);\r\nvar LoadingManager = __webpack_require__(32);\r\nvar characterActions = __webpack_require__(4);\r\n\r\nvar _require = __webpack_require__(0),\r\n    assign = _require.assign,\r\n    callIfExists = _require.callIfExists,\r\n    trim = _require.trim,\r\n    colorStringToVals = _require.colorStringToVals;\r\n\r\nvar defaultOptions = {\r\n  charDataLoader: defaultCharDataLoader,\r\n  onLoadCharDataError: null,\r\n  onLoadCharDataSuccess: null,\r\n  showOutline: true,\r\n  showCharacter: true,\r\n  renderer: 'svg',\r\n\r\n  // positioning options\r\n\r\n  width: null,\r\n  height: null,\r\n  padding: 20,\r\n\r\n  // animation options\r\n\r\n  strokeAnimationSpeed: 1,\r\n  strokeFadeDuration: 400,\r\n  strokeHighlightDuration: 200,\r\n  strokeHighlightSpeed: 2,\r\n  delayBetweenStrokes: 1000,\r\n  delayBetweenLoops: 2000,\r\n\r\n  // colors\r\n\r\n  strokeColor: '#555',\r\n  radicalColor: null,\r\n  highlightColor: '#AAF',\r\n  outlineColor: '#DDD',\r\n  drawingColor: '#333',\r\n\r\n  // quiz options\r\n\r\n  leniency: 1,\r\n  showHintAfterMisses: 3,\r\n  highlightOnComplete: true,\r\n  highlightCompleteColor: null,\r\n\r\n  // undocumented obscure options\r\n\r\n  drawingFadeDuration: 300,\r\n  drawingWidth: 4,\r\n  strokeWidth: 2,\r\n  outlineWidth: 2,\r\n  rendererOverride: {}\r\n};\r\n\r\nfunction HanziWriter() {\r\n  if (arguments.length > 0) {\r\n    var character = void 0;\r\n    var options = {};\r\n    var element = arguments.length <= 0 ? undefined : arguments[0];\r\n    if (arguments.length > 1) {\r\n      if (typeof (arguments.length <= 1 ? undefined : arguments[1]) === 'string') {\r\n        // eslint-disable-next-line\r\n        console.warn('Using new HanziWriter() to set a character is deprecated. Use HanziWriter.create() instead');\r\n        character = arguments.length <= 1 ? undefined : arguments[1];\r\n        options = (arguments.length <= 2 ? undefined : arguments[2]) || {};\r\n      } else {\r\n        options = arguments.length <= 1 ? undefined : arguments[1];\r\n      }\r\n    }\r\n    this._init(element, options);\r\n    if (character) {\r\n      this.setCharacter(character);\r\n    }\r\n  }\r\n}\r\n\r\n// ------ public API ------ //\r\n\r\nHanziWriter.prototype.showCharacter = function () {\r\n  var _this = this;\r\n\r\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n  this._options.showCharacter = true;\r\n  return this._withData(function () {\r\n    return _this._renderState.run(characterActions.showCharacter('main', _this._character, typeof options.duration === 'number' ? options.duration : _this._options.strokeFadeDuration)).then(function (res) {\r\n      return callIfExists(options.onComplete, res);\r\n    });\r\n  });\r\n};\r\nHanziWriter.prototype.hideCharacter = function () {\r\n  var _this2 = this;\r\n\r\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n  this._options.showCharacter = false;\r\n  return this._withData(function () {\r\n    return _this2._renderState.run(characterActions.hideCharacter('main', _this2._character, typeof options.duration === 'number' ? options.duration : _this2._options.strokeFadeDuration)).then(function (res) {\r\n      return callIfExists(options.onComplete, res);\r\n    });\r\n  });\r\n};\r\nHanziWriter.prototype.animateCharacter = function () {\r\n  var _this3 = this;\r\n\r\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n  this.cancelQuiz();\r\n  return this._withData(function () {\r\n    return _this3._renderState.run(characterActions.animateCharacter('main', _this3._character, _this3._options.strokeFadeDuration, _this3._options.strokeAnimationSpeed, _this3._options.delayBetweenStrokes)).then(function (res) {\r\n      return callIfExists(options.onComplete, res);\r\n    });\r\n  });\r\n};\r\nHanziWriter.prototype.animateStroke = function (strokeNum) {\r\n  var _this4 = this;\r\n\r\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n  this.cancelQuiz();\r\n  return this._withData(function () {\r\n    return _this4._renderState.run(characterActions.animateSingleStroke('main', _this4._character, strokeNum, _this4._options.strokeAnimationSpeed)).then(function (res) {\r\n      return callIfExists(options.onComplete, res);\r\n    });\r\n  });\r\n};\r\nHanziWriter.prototype.highlightStroke = function (strokeNum) {\r\n  var _this5 = this;\r\n\r\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n  return this._withData(function () {\r\n    return _this5._renderState.run(characterActions.highlightStroke(_this5._character.strokes[strokeNum], _this5._options.highlightColor, _this5._options.strokeHighlightSpeed)).then(function (res) {\r\n      return callIfExists(options.onComplete, res);\r\n    });\r\n  });\r\n};\r\nHanziWriter.prototype.loopCharacterAnimation = function () {\r\n  var _this6 = this;\r\n\r\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n  this.cancelQuiz();\r\n  return this._withData(function () {\r\n    return _this6._renderState.run(characterActions.animateCharacterLoop('main', _this6._character, _this6._options.strokeFadeDuration, _this6._options.strokeAnimationSpeed, _this6._options.delayBetweenStrokes, _this6._options.delayBetweenLoops), { loop: true });\r\n  });\r\n};\r\n\r\nHanziWriter.prototype.pauseAnimation = function () {\r\n  var _this7 = this;\r\n\r\n  return this._withData(function () {\r\n    return _this7._renderState.pauseAll();\r\n  });\r\n};\r\n\r\nHanziWriter.prototype.resumeAnimation = function () {\r\n  var _this8 = this;\r\n\r\n  return this._withData(function () {\r\n    return _this8._renderState.resumeAll();\r\n  });\r\n};\r\n\r\nHanziWriter.prototype.showOutline = function () {\r\n  var _this9 = this;\r\n\r\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n  this._options.showOutline = true;\r\n  return this._withData(function () {\r\n    return _this9._renderState.run(characterActions.showCharacter('outline', _this9._character, typeof options.duration === 'number' ? options.duration : _this9._options.strokeFadeDuration)).then(function (res) {\r\n      return callIfExists(options.onComplete, res);\r\n    });\r\n  });\r\n};\r\n\r\nHanziWriter.prototype.hideOutline = function () {\r\n  var _this10 = this;\r\n\r\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n  this._options.showOutline = false;\r\n  return this._withData(function () {\r\n    return _this10._renderState.run(characterActions.hideCharacter('outline', _this10._character, typeof options.duration === 'number' ? options.duration : _this10._options.strokeFadeDuration)).then(function (res) {\r\n      return callIfExists(options.onComplete, res);\r\n    });\r\n  });\r\n};\r\n\r\nHanziWriter.prototype.updateColor = function (colorName, colorVal) {\r\n  var _this11 = this;\r\n\r\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\r\n\r\n  return this._withData(function () {\r\n    var duration = typeof options.duration === 'number' ? options.duration : _this11._options.strokeFadeDuration;\r\n    var fixedColorVal = colorVal;\r\n    // If we're removing radical color, tween it to the stroke color\r\n    if (colorName === 'radicalColor' && !colorVal) {\r\n      fixedColorVal = _this11._options.strokeColor;\r\n    }\r\n    var mappedColor = colorStringToVals(fixedColorVal);\r\n    _this11._options[colorName] = colorVal;\r\n    var mutation = characterActions.updateColor(colorName, mappedColor, duration);\r\n    // make sure to set radicalColor back to null after the transition finishes if val == null\r\n    if (colorName === 'radicalColor' && !colorVal) {\r\n      mutation = mutation.concat(characterActions.updateColor(colorName, null, 0));\r\n    }\r\n    return _this11._renderState.run(mutation).then(function (res) {\r\n      return callIfExists(options.onComplete, res);\r\n    });\r\n  });\r\n};\r\n\r\nHanziWriter.prototype.quiz = function () {\r\n  var _this12 = this;\r\n\r\n  var quizOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\r\n\r\n  this._withData(function () {\r\n    _this12.cancelQuiz();\r\n    _this12._quiz = new Quiz(_this12._character, _this12._renderState, _this12._positioner);\r\n    _this12._quiz.startQuiz(assign({}, _this12._options, quizOptions));\r\n  });\r\n};\r\n\r\nHanziWriter.prototype.cancelQuiz = function () {\r\n  if (this._quiz) {\r\n    this._quiz.cancel();\r\n    this._quiz = null;\r\n  }\r\n};\r\n\r\nHanziWriter.prototype.setCharacter = function (char) {\r\n  var _this13 = this;\r\n\r\n  this.cancelQuiz();\r\n  this._char = char;\r\n  if (this._hanziWriterRenderer) this._hanziWriterRenderer.destroy();\r\n  if (this._renderState) this._renderState.cancelAll();\r\n  this._hanziWriterRenderer = null;\r\n  this._withDataPromise = this._loadingManager.loadCharData(char).then(function (pathStrings) {\r\n    if (_this13._loadingManager.loadingFailed) return;\r\n\r\n    _this13._character = parseCharData(char, pathStrings);\r\n    _this13._positioner = new Positioner(_this13._options);\r\n    var hanziWriterRenderer = new _this13._renderer.HanziWriterRenderer(_this13._character, _this13._positioner);\r\n    _this13._hanziWriterRenderer = hanziWriterRenderer;\r\n    _this13._renderState = new RenderState(_this13._character, _this13._options, function (nextState) {\r\n      hanziWriterRenderer.render(nextState);\r\n    });\r\n    _this13._hanziWriterRenderer.mount(_this13.target);\r\n    _this13._hanziWriterRenderer.render(_this13._renderState.state);\r\n  });\r\n  return this._withDataPromise;\r\n};\r\n\r\n// ------------- //\r\n\r\nHanziWriter.prototype._init = function (element, options) {\r\n  var renderer = options.renderer === 'canvas' ? canvasRenderer : svgRenderer;\r\n  var rendererOverride = options.rendererOverride || {};\r\n  this._renderer = {\r\n    HanziWriterRenderer: rendererOverride.HanziWriterRenderer || renderer.HanziWriterRenderer,\r\n    createRenderTarget: rendererOverride.createRenderTarget || renderer.createRenderTarget\r\n  };\r\n  // wechat miniprogram component needs direct access to the render target, so this is public\r\n  this.target = this._renderer.createRenderTarget(element, options.width, options.height);\r\n  this._options = this._assignOptions(options);\r\n  this._loadingManager = new LoadingManager(this._options);\r\n  this._setupListeners();\r\n  this._quiz = null;\r\n  return this;\r\n};\r\n\r\nHanziWriter.prototype._assignOptions = function (options) {\r\n  var mergedOptions = assign({}, defaultOptions, options);\r\n\r\n  // backfill strokeAnimationSpeed if deprecated strokeAnimationDuration is provided instead\r\n  if (options.strokeAnimationDuration && !options.strokeAnimationSpeed) {\r\n    mergedOptions.strokeAnimationSpeed = 500 / mergedOptions.strokeAnimationDuration;\r\n  }\r\n  if (options.strokeHighlightDuration && !options.strokeHighlightSpeed) {\r\n    mergedOptions.strokeHighlightSpeed = 500 / mergedOptions.strokeHighlightDuration;\r\n  }\r\n\r\n  if (!options.highlightCompleteColor) {\r\n    mergedOptions.highlightCompleteColor = mergedOptions.highlightColor;\r\n  }\r\n\r\n  return this._fillWidthAndHeight(mergedOptions);\r\n};\r\n\r\n// returns a new options object with width and height filled in if missing\r\nHanziWriter.prototype._fillWidthAndHeight = function (options) {\r\n  var filledOpts = assign({}, options);\r\n  if (filledOpts.width && !filledOpts.height) {\r\n    filledOpts.height = filledOpts.width;\r\n  } else if (filledOpts.height && !filledOpts.width) {\r\n    filledOpts.width = filledOpts.height;\r\n  } else if (!filledOpts.width && !filledOpts.height) {\r\n    var _target$getBoundingCl = this.target.getBoundingClientRect(),\r\n        width = _target$getBoundingCl.width,\r\n        height = _target$getBoundingCl.height;\r\n\r\n    var minDim = Math.min(width, height);\r\n    filledOpts.width = minDim;\r\n    filledOpts.height = minDim;\r\n  }\r\n  return filledOpts;\r\n};\r\n\r\nHanziWriter.prototype._withData = function (func) {\r\n  var _this14 = this;\r\n\r\n  // if this._loadingManager.loadingFailed, then loading failed before this method was called\r\n  if (this._loadingManager.loadingFailed) {\r\n    throw Error('Failed to load character data. Call setCharacter and try again.');\r\n  }\r\n  return this._withDataPromise.then(function () {\r\n    if (!_this14._loadingManager.loadingFailed) {\r\n      return func();\r\n    }\r\n  });\r\n};\r\n\r\nHanziWriter.prototype._setupListeners = function () {\r\n  var _this15 = this;\r\n\r\n  this.target.addPointerStartListener(function (evt) {\r\n    if (!_this15._quiz) return;\r\n    evt.preventDefault();\r\n    _this15._forwardToQuiz('startUserStroke', evt.getPoint());\r\n  });\r\n  this.target.addPointerMoveListener(function (evt) {\r\n    if (!_this15._quiz) return;\r\n    evt.preventDefault();\r\n    _this15._forwardToQuiz('continueUserStroke', evt.getPoint());\r\n  });\r\n  this.target.addPointerEndListener(function () {\r\n    return _this15._forwardToQuiz('endUserStroke');\r\n  });\r\n};\r\n\r\nHanziWriter.prototype._forwardToQuiz = function (method) {\r\n  var _quiz;\r\n\r\n  if (!this._quiz) return;\r\n\r\n  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n    args[_key - 1] = arguments[_key];\r\n  }\r\n\r\n  (_quiz = this._quiz)[method].apply(_quiz, args);\r\n};\r\n\r\n// --- Static Public API --- //\r\n\r\nHanziWriter.create = function (element, character) {\r\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\r\n\r\n  var writer = new HanziWriter(element, options);\r\n  writer.setCharacter(character);\r\n  return writer;\r\n};\r\n\r\nvar lastLoadingManager = null;\r\nvar lastLoadingOptions = null;\r\n\r\nHanziWriter.loadCharacterData = function (character) {\r\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n  var loadingManager = void 0;\r\n  if (lastLoadingManager && lastLoadingOptions === options) {\r\n    loadingManager = lastLoadingManager;\r\n  } else {\r\n    loadingManager = new LoadingManager(assign({}, defaultOptions, options));\r\n  }\r\n  lastLoadingManager = loadingManager;\r\n  lastLoadingOptions = options;\r\n  return loadingManager.loadCharData(character);\r\n};\r\n\r\nHanziWriter.getScalingTransform = function (width, height) {\r\n  var padding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n\r\n  var positioner = new Positioner({ width: width, height: height, padding: padding });\r\n  return {\r\n    x: positioner.xOffset,\r\n    y: positioner.yOffset,\r\n    scale: positioner.scale,\r\n    transform: trim('\\n      translate(' + positioner.xOffset + ', ' + (positioner.height - positioner.yOffset) + ')\\n      scale(' + positioner.scale + ', ' + -1 * positioner.scale + ')\\n    ').replace(/\\s+/g, ' ')\r\n  };\r\n};\r\n\r\nmodule.exports = HanziWriter;\r\n\r\n/***/ }),\r\n/* 10 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar _require = __webpack_require__(0),\r\n    copyAndMergeDeep = _require.copyAndMergeDeep,\r\n    colorStringToVals = _require.colorStringToVals;\r\n\r\nfunction RenderState(character, options, onStateChange) {\r\n  this._onStateChange = onStateChange;\r\n  this._mutationChains = [];\r\n  this.state = {\r\n    options: {\r\n      drawingFadeDuration: options.drawingFadeDuration,\r\n      drawingWidth: options.drawingWidth,\r\n      drawingColor: colorStringToVals(options.drawingColor),\r\n      strokeColor: colorStringToVals(options.strokeColor),\r\n      outlineColor: colorStringToVals(options.outlineColor),\r\n      radicalColor: colorStringToVals(options.radicalColor || options.strokeColor),\r\n      highlightColor: colorStringToVals(options.highlightColor)\r\n    },\r\n    character: {\r\n      main: {\r\n        opacity: options.showCharacter ? 1 : 0,\r\n        strokes: {}\r\n      },\r\n      outline: {\r\n        opacity: options.showOutline ? 1 : 0,\r\n        strokes: {}\r\n      },\r\n      highlight: {\r\n        opacity: 1,\r\n        strokes: {}\r\n      }\r\n    },\r\n    userStrokes: null\r\n  };\r\n  for (var i = 0; i < character.strokes.length; i++) {\r\n    this.state.character.main.strokes[i] = {\r\n      opacity: 1,\r\n      displayPortion: 1\r\n    };\r\n    this.state.character.outline.strokes[i] = {\r\n      opacity: 1,\r\n      displayPortion: 1\r\n    };\r\n    this.state.character.highlight.strokes[i] = {\r\n      opacity: 0,\r\n      displayPortion: 1\r\n    };\r\n  }\r\n}\r\n\r\nRenderState.prototype.updateState = function (stateChanges) {\r\n  var nextState = copyAndMergeDeep(this.state, stateChanges);\r\n  this._onStateChange(nextState, this.state);\r\n  this.state = nextState;\r\n};\r\n\r\nRenderState.prototype.run = function (mutations) {\r\n  var _this = this;\r\n\r\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\r\n\r\n  var scopes = mutations.map(function (mut) {\r\n    return mut.scope;\r\n  }).filter(function (x) {\r\n    return x;\r\n  });\r\n  this.cancelMutations(scopes);\r\n  return new Promise(function (resolve) {\r\n    var mutationChain = {\r\n      _isActive: true,\r\n      _index: 0,\r\n      _resolve: resolve,\r\n      _mutations: mutations,\r\n      _loop: options.loop,\r\n      _scopes: scopes\r\n    };\r\n    _this._mutationChains.push(mutationChain);\r\n    _this._run(mutationChain);\r\n  });\r\n};\r\n\r\nRenderState.prototype._run = function (mutationChain) {\r\n  var _this2 = this;\r\n\r\n  if (!mutationChain._isActive) return;\r\n  var mutations = mutationChain._mutations;\r\n  if (mutationChain._index >= mutations.length) {\r\n    if (mutationChain._loop) {\r\n      mutationChain._index = 0; // eslint-disable-line no-param-reassign\r\n    } else {\r\n      mutationChain._isActive = false; // eslint-disable-line no-param-reassign\r\n      this._mutationChains = this._mutationChains.filter(function (chain) {\r\n        return chain !== mutationChain;\r\n      });\r\n      // The chain is done - resolve the promise to signal it finished successfully\r\n      mutationChain._resolve({ canceled: false });\r\n      return;\r\n    }\r\n  }\r\n\r\n  var activeMutation = mutationChain._mutations[mutationChain._index];\r\n  activeMutation.run(this).then(function () {\r\n    if (mutationChain._isActive) {\r\n      mutationChain._index++; // eslint-disable-line no-param-reassign\r\n      _this2._run(mutationChain);\r\n    }\r\n  });\r\n};\r\n\r\nRenderState.prototype._getActiveMutations = function () {\r\n  return this._mutationChains.map(function (chain) {\r\n    return chain._mutations[chain._index];\r\n  });\r\n};\r\n\r\nRenderState.prototype.pauseAll = function () {\r\n  this._getActiveMutations().forEach(function (mutation) {\r\n    return mutation.pause();\r\n  });\r\n};\r\n\r\nRenderState.prototype.resumeAll = function () {\r\n  this._getActiveMutations().forEach(function (mutation) {\r\n    return mutation.resume();\r\n  });\r\n};\r\n\r\nRenderState.prototype.cancelMutations = function (scopes) {\r\n  var _this3 = this;\r\n\r\n  this._mutationChains.forEach(function (chain) {\r\n    chain._scopes.forEach(function (chainScope) {\r\n      scopes.forEach(function (scope) {\r\n        if (chainScope.indexOf(scope) >= 0 || scope.indexOf(chainScope) >= 0) {\r\n          _this3._cancelMutationChain(chain);\r\n        }\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nRenderState.prototype.cancelAll = function () {\r\n  this.cancelMutations(['']);\r\n};\r\n\r\nRenderState.prototype._cancelMutationChain = function (mutationChain) {\r\n  mutationChain._isActive = false; // eslint-disable-line no-param-reassign\r\n  for (var i = mutationChain._index; i < mutationChain._mutations.length; i++) {\r\n    mutationChain._mutations[i].cancel(this);\r\n  }\r\n  if (mutationChain._resolve) {\r\n    mutationChain._resolve({ canceled: true });\r\n  }\r\n  this._mutationChains = this._mutationChains.filter(function (chain) {\r\n    return chain !== mutationChain;\r\n  });\r\n};\r\n\r\nmodule.exports = RenderState;\r\n\r\n/***/ }),\r\n/* 11 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\r\n\r\nvar Stroke = __webpack_require__(12);\r\nvar Character = __webpack_require__(13);\r\n\r\nvar generateStrokes = function generateStrokes(charJson) {\r\n  var isInRadical = function isInRadical(strokeNum) {\r\n    return charJson.radStrokes && charJson.radStrokes.indexOf(strokeNum) >= 0;\r\n  };\r\n\r\n  return charJson.strokes.map(function (path, index) {\r\n    var points = charJson.medians[index].map(function (pointData) {\r\n      var _pointData = _slicedToArray(pointData, 2),\r\n          x = _pointData[0],\r\n          y = _pointData[1];\r\n\r\n      return { x: x, y: y };\r\n    });\r\n    return new Stroke(path, points, index, isInRadical(index));\r\n  });\r\n};\r\n\r\nvar parseCharData = function parseCharData(symbol, charJson) {\r\n  var strokes = generateStrokes(charJson);\r\n  return new Character(symbol, strokes);\r\n};\r\n\r\nmodule.exports = parseCharData;\r\n\r\n/***/ }),\r\n/* 12 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar _require = __webpack_require__(2),\r\n    subtract = _require.subtract,\r\n    distance = _require.distance,\r\n    length = _require.length;\r\n\r\nfunction Stroke(path, points, strokeNum) {\r\n  var isInRadical = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\r\n\r\n  this.path = path;\r\n  this.points = points;\r\n  this.strokeNum = strokeNum;\r\n  this.isInRadical = isInRadical;\r\n}\r\n\r\nStroke.prototype.getStartingPoint = function () {\r\n  return this.points[0];\r\n};\r\n\r\nStroke.prototype.getEndingPoint = function () {\r\n  return this.points[this.points.length - 1];\r\n};\r\n\r\nStroke.prototype.getLength = function () {\r\n  return length(this.points);\r\n};\r\n\r\nStroke.prototype.getVectors = function () {\r\n  var lastPoint = this.points[0];\r\n  var pointsSansFirst = this.points.slice(1);\r\n  return pointsSansFirst.map(function (point) {\r\n    var vector = subtract(point, lastPoint);\r\n    lastPoint = point;\r\n    return vector;\r\n  });\r\n};\r\n\r\nStroke.prototype.getDistance = function (point) {\r\n  var distances = this.points.map(function (strokePoint) {\r\n    return distance(strokePoint, point);\r\n  });\r\n  return Math.min.apply(Math, distances);\r\n};\r\n\r\nStroke.prototype.getAverageDistance = function (points) {\r\n  var _this = this;\r\n\r\n  var totalDist = points.reduce(function (acc, point) {\r\n    return acc + _this.getDistance(point);\r\n  }, 0);\r\n  return totalDist / points.length;\r\n};\r\n\r\nmodule.exports = Stroke;\r\n\r\n/***/ }),\r\n/* 13 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nfunction Character(symbol, strokes) {\r\n  this.symbol = symbol;\r\n  this.strokes = strokes;\r\n}\r\n\r\nmodule.exports = Character;\r\n\r\n/***/ }),\r\n/* 14 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\n// All makemeahanzi characters have the same bounding box\r\nvar CHARACTER_BOUNDS = [{ x: 0, y: -124 }, { x: 1024, y: 900 }];\r\n\r\nfunction Positioner(options) {\r\n  this._options = options;\r\n  this.width = options.width;\r\n  this.height = options.height;\r\n  this._calculateScaleAndOffset();\r\n}\r\n\r\nPositioner.prototype.convertExternalPoint = function (point) {\r\n  var x = (point.x - this.xOffset) / this.scale;\r\n  var y = (this.height - this.yOffset - point.y) / this.scale;\r\n  return { x: x, y: y };\r\n};\r\n\r\nPositioner.prototype._calculateScaleAndOffset = function () {\r\n  var bounds = CHARACTER_BOUNDS;\r\n  var preScaledWidth = bounds[1].x - bounds[0].x;\r\n  var preScaledHeight = bounds[1].y - bounds[0].y;\r\n  var effectiveWidth = this.width - 2 * this._options.padding;\r\n  var effectiveHeight = this.height - 2 * this._options.padding;\r\n  var scaleX = effectiveWidth / preScaledWidth;\r\n  var scaleY = effectiveHeight / preScaledHeight;\r\n\r\n  this.scale = Math.min(scaleX, scaleY);\r\n\r\n  var xCenteringBuffer = this._options.padding + (effectiveWidth - this.scale * preScaledWidth) / 2;\r\n  var yCenteringBuffer = this._options.padding + (effectiveHeight - this.scale * preScaledHeight) / 2;\r\n\r\n  this.xOffset = -1 * bounds[0].x * this.scale + xCenteringBuffer;\r\n  this.yOffset = -1 * bounds[0].y * this.scale + yCenteringBuffer;\r\n};\r\n\r\nmodule.exports = Positioner;\r\n\r\n/***/ }),\r\n/* 15 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar strokeMatches = __webpack_require__(16);\r\nvar UserStroke = __webpack_require__(17);\r\n\r\nvar _require = __webpack_require__(0),\r\n    callIfExists = _require.callIfExists,\r\n    counter = _require.counter;\r\n\r\nvar quizActions = __webpack_require__(18);\r\nvar geometry = __webpack_require__(2);\r\nvar characterActions = __webpack_require__(4);\r\n\r\nvar getDrawnPath = function getDrawnPath(userStroke) {\r\n  return {\r\n    pathString: geometry.getPathString(userStroke.externalPoints),\r\n    points: userStroke.points.map(function (point) {\r\n      return geometry.round(point);\r\n    })\r\n  };\r\n};\r\n\r\nfunction Quiz(character, renderState, positioner) {\r\n  this._character = character;\r\n  this._renderState = renderState;\r\n  this._isActive = false;\r\n  this._positioner = positioner;\r\n}\r\n\r\nQuiz.prototype.startQuiz = function (options) {\r\n  this._isActive = true;\r\n  this._options = options;\r\n  this._currentStrokeIndex = 0;\r\n  this._numRecentMistakes = 0;\r\n  this._totalMistakes = 0;\r\n  this._renderState.run(quizActions.startQuiz(this._character, options.strokeFadeDuration));\r\n};\r\n\r\nQuiz.prototype.startUserStroke = function (externalPoint) {\r\n  var point = this._positioner.convertExternalPoint(externalPoint);\r\n  if (!this._isActive) return null;\r\n  if (this._userStroke) return this.endUserStroke();\r\n  var strokeId = counter();\r\n  this._userStroke = new UserStroke(strokeId, point, externalPoint);\r\n  this._renderState.run(quizActions.startUserStroke(strokeId, point));\r\n};\r\n\r\nQuiz.prototype.continueUserStroke = function (externalPoint) {\r\n  if (!this._userStroke) return;\r\n  var point = this._positioner.convertExternalPoint(externalPoint);\r\n  this._userStroke.appendPoint(point, externalPoint);\r\n  var nextPoints = this._userStroke.points.slice(0);\r\n  this._renderState.run(quizActions.updateUserStroke(this._userStroke.id, nextPoints));\r\n};\r\n\r\nQuiz.prototype.endUserStroke = function () {\r\n  if (!this._userStroke) return;\r\n\r\n  this._renderState.run(quizActions.removeUserStroke(this._userStroke.id, this._options.drawingFadeDuration));\r\n  // skip single-point strokes\r\n  if (this._userStroke.points.length === 1) {\r\n    this._userStroke = null;\r\n    return;\r\n  }\r\n\r\n  var currentStroke = this._getCurrentStroke();\r\n  var isOutlineVisible = this._renderState.state.character.outline.opacity > 0;\r\n  var isMatch = strokeMatches(this._userStroke, this._character, this._currentStrokeIndex, {\r\n    isOutlineVisible: isOutlineVisible,\r\n    leniency: this._options.leniency\r\n  });\r\n\r\n  if (isMatch) {\r\n    this._handleSuccess();\r\n  } else {\r\n    this._handleFailure();\r\n    if (this._numRecentMistakes >= this._options.showHintAfterMisses && this._options.showHintAfterMisses !== false) {\r\n      this._renderState.run(quizActions.highlightStroke(currentStroke, this._options.highlightColor, this._options.strokeHighlightSpeed));\r\n    }\r\n  }\r\n  this._userStroke = null;\r\n};\r\n\r\nQuiz.prototype.cancel = function () {\r\n  this._isActive = false;\r\n  if (this._userStroke) {\r\n    this._renderState.run(quizActions.removeUserStroke(this._userStroke.id, this._options.drawingFadeDuration));\r\n  }\r\n};\r\n\r\nQuiz.prototype._handleSuccess = function () {\r\n  callIfExists(this._options.onCorrectStroke, {\r\n    character: this._character.symbol,\r\n    strokeNum: this._currentStrokeIndex,\r\n    mistakesOnStroke: this._numRecentMistakes,\r\n    totalMistakes: this._totalMistakes,\r\n    strokesRemaining: this._character.strokes.length - this._currentStrokeIndex - 1,\r\n    drawnPath: getDrawnPath(this._userStroke)\r\n  });\r\n  var animation = characterActions.showStroke('main', this._currentStrokeIndex, this._options.strokeFadeDuration);\r\n  this._currentStrokeIndex += 1;\r\n  this._numRecentMistakes = 0;\r\n\r\n  if (this._currentStrokeIndex === this._character.strokes.length) {\r\n    this._isActive = false;\r\n    callIfExists(this._options.onComplete, {\r\n      character: this._character.symbol,\r\n      totalMistakes: this._totalMistakes\r\n    });\r\n    if (this._options.highlightOnComplete) {\r\n      animation = animation.concat(quizActions.highlightCompleteChar(this._character, this._options.highlightCompleteColor, this._options.strokeHighlightDuration * 2));\r\n    }\r\n  }\r\n  this._renderState.run(animation);\r\n};\r\n\r\nQuiz.prototype._handleFailure = function () {\r\n  this._numRecentMistakes += 1;\r\n  this._totalMistakes += 1;\r\n  callIfExists(this._options.onMistake, {\r\n    character: this._character.symbol,\r\n    strokeNum: this._currentStrokeIndex,\r\n    mistakesOnStroke: this._numRecentMistakes,\r\n    totalMistakes: this._totalMistakes,\r\n    strokesRemaining: this._character.strokes.length - this._currentStrokeIndex,\r\n    drawnPath: getDrawnPath(this._userStroke)\r\n  });\r\n};\r\n\r\nQuiz.prototype._getCurrentStroke = function () {\r\n  return this._character.strokes[this._currentStrokeIndex];\r\n};\r\n\r\nmodule.exports = Quiz;\r\n\r\n/***/ }),\r\n/* 16 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar _require = __webpack_require__(0),\r\n    average = _require.average,\r\n    assign = _require.assign;\r\n\r\nvar _require2 = __webpack_require__(2),\r\n    cosineSimilarity = _require2.cosineSimilarity,\r\n    equals = _require2.equals,\r\n    frechetDist = _require2.frechetDist,\r\n    distance = _require2.distance,\r\n    subtract = _require2.subtract,\r\n    normalizeCurve = _require2.normalizeCurve,\r\n    rotate = _require2.rotate,\r\n    length = _require2.length;\r\n\r\nvar AVG_DIST_THRESHOLD = 350; // bigger = more lenient\r\nvar COSINE_SIMILARITY_THRESHOLD = 0; // -1 to 1, smaller = more lenient\r\nvar START_AND_END_DIST_THRESHOLD = 250; // bigger = more lenient\r\nvar FRECHET_THRESHOLD = 0.40; // bigger = more lenient\r\nvar MIN_LEN_THRESHOLD = 0.35; // smaller = more lenient\r\n\r\nvar startAndEndMatches = function startAndEndMatches(points, closestStroke, leniency) {\r\n  var startingDist = distance(closestStroke.getStartingPoint(), points[0]);\r\n  var endingDist = distance(closestStroke.getEndingPoint(), points[points.length - 1]);\r\n  return startingDist <= START_AND_END_DIST_THRESHOLD * leniency && endingDist <= START_AND_END_DIST_THRESHOLD * leniency;\r\n};\r\n\r\n// returns a list of the direction of all segments in the line connecting the points\r\nvar getEdgeVectors = function getEdgeVectors(points) {\r\n  var vectors = [];\r\n  var lastPoint = points[0];\r\n  points.slice(1).forEach(function (point) {\r\n    vectors.push(subtract(point, lastPoint));\r\n    lastPoint = point;\r\n  });\r\n  return vectors;\r\n};\r\n\r\nvar directionMatches = function directionMatches(points, stroke) {\r\n  var edgeVectors = getEdgeVectors(points);\r\n  var strokeVectors = stroke.getVectors();\r\n  var similarities = edgeVectors.map(function (edgeVector) {\r\n    var strokeSimilarities = strokeVectors.map(function (strokeVector) {\r\n      return cosineSimilarity(strokeVector, edgeVector);\r\n    });\r\n    return Math.max.apply(Math, strokeSimilarities);\r\n  });\r\n  var avgSimilarity = average(similarities);\r\n  return avgSimilarity > COSINE_SIMILARITY_THRESHOLD;\r\n};\r\n\r\nvar lengthMatches = function lengthMatches(points, stroke, leniency) {\r\n  return leniency * (length(points) + 25) / (stroke.getLength() + 25) >= MIN_LEN_THRESHOLD;\r\n};\r\n\r\nvar stripDuplicates = function stripDuplicates(points) {\r\n  if (points.length < 2) return points;\r\n  var dedupedPoints = [points[0]];\r\n  points.slice(1).forEach(function (point) {\r\n    if (!equals(point, dedupedPoints[dedupedPoints.length - 1])) {\r\n      dedupedPoints.push(point);\r\n    }\r\n  });\r\n  return dedupedPoints;\r\n};\r\n\r\nvar SHAPE_FIT_ROTATIONS = [Math.PI / 16, Math.PI / 32, 0, -1 * Math.PI / 32, -1 * Math.PI / 16];\r\n\r\nvar shapeFit = function shapeFit(curve1, curve2, leniency) {\r\n  var normCurve1 = normalizeCurve(curve1);\r\n  var normCurve2 = normalizeCurve(curve2);\r\n  var minDist = Infinity;\r\n  SHAPE_FIT_ROTATIONS.forEach(function (theta) {\r\n    var dist = frechetDist(normCurve1, rotate(normCurve2, theta));\r\n    if (dist < minDist) {\r\n      minDist = dist;\r\n    }\r\n  });\r\n  return minDist <= FRECHET_THRESHOLD * leniency;\r\n};\r\n\r\nvar getMatchData = function getMatchData(points, stroke, options) {\r\n  var _options$leniency = options.leniency,\r\n      leniency = _options$leniency === undefined ? 1 : _options$leniency,\r\n      _options$isOutlineVis = options.isOutlineVisible,\r\n      isOutlineVisible = _options$isOutlineVis === undefined ? false : _options$isOutlineVis;\r\n\r\n  var avgDist = stroke.getAverageDistance(points);\r\n  var distMod = isOutlineVisible || stroke.strokeNum > 0 ? 0.5 : 1;\r\n  var withinDistThresh = avgDist <= AVG_DIST_THRESHOLD * distMod * leniency;\r\n  // short circuit for faster matching\r\n  if (!withinDistThresh) {\r\n    return { isMatch: false, avgDist: avgDist };\r\n  }\r\n  var startAndEndMatch = startAndEndMatches(points, stroke, leniency);\r\n  var directionMatch = directionMatches(points, stroke);\r\n  var shapeMatch = shapeFit(points, stroke.points, leniency);\r\n  var lengthMatch = lengthMatches(points, stroke, leniency);\r\n  return {\r\n    isMatch: withinDistThresh && startAndEndMatch && directionMatch && shapeMatch && lengthMatch,\r\n    avgDist: avgDist\r\n  };\r\n};\r\n\r\nvar strokeMatches = function strokeMatches(userStroke, character, strokeNum) {\r\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\r\n\r\n  var points = stripDuplicates(userStroke.points);\r\n  if (points.length < 2) return null;\r\n\r\n  var strokeMatchData = getMatchData(points, character.strokes[strokeNum], options);\r\n  if (!strokeMatchData.isMatch) return false;\r\n\r\n  // if there is a better match among strokes the user hasn't drawn yet, the user probably drew the wrong stroke\r\n  var laterStrokes = character.strokes.slice(strokeNum + 1);\r\n  var closestMatchDist = strokeMatchData.avgDist;\r\n  for (var i = 0; i < laterStrokes.length; i++) {\r\n    var laterMatchData = getMatchData(points, laterStrokes[i], options);\r\n    if (laterMatchData.isMatch && laterMatchData.avgDist < closestMatchDist) {\r\n      closestMatchDist = laterMatchData.avgDist;\r\n    }\r\n  }\r\n  // if there's a better match, rather that returning false automatically, try reducing leniency instead\r\n  // if leniency is already really high we can allow some similar strokes to pass\r\n  if (closestMatchDist < strokeMatchData.avgDist) {\r\n    // adjust leniency between 0.3 and 0.6 depending on how much of a better match the new match is\r\n    var leniencyAdjustment = 0.6 * (closestMatchDist + strokeMatchData.avgDist) / (2 * strokeMatchData.avgDist);\r\n    var newLeniency = (options.leniency || 1) * leniencyAdjustment;\r\n    var adjustedOptions = assign({}, options, { leniency: newLeniency });\r\n    var adjustedStrokeMatchData = getMatchData(points, character.strokes[strokeNum], adjustedOptions);\r\n    return adjustedStrokeMatchData.isMatch;\r\n  }\r\n  return true;\r\n};\r\n\r\nmodule.exports = strokeMatches;\r\n\r\n/***/ }),\r\n/* 17 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nfunction UserStroke(id, startingPoint, startingExternalPoint) {\r\n  this.id = id;\r\n  this.points = [startingPoint];\r\n  this.externalPoints = [startingExternalPoint];\r\n}\r\n\r\nUserStroke.prototype.appendPoint = function (point, externalPoint) {\r\n  this.points.push(point);\r\n  this.externalPoints.push(externalPoint);\r\n};\r\n\r\nmodule.exports = UserStroke;\r\n\r\n/***/ }),\r\n/* 18 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar Mutation = __webpack_require__(5);\r\nvar characterActions = __webpack_require__(4);\r\n\r\nvar _require = __webpack_require__(0),\r\n    objRepeat = _require.objRepeat;\r\n\r\nvar startQuiz = function startQuiz(character, fadeDuration) {\r\n  return characterActions.hideCharacter('main', character, fadeDuration).concat([new Mutation('character.highlight', {\r\n    opacity: 1,\r\n    strokes: objRepeat({ opacity: 0 }, character.strokes.length)\r\n  }, { force: true }), new Mutation('character.main', {\r\n    opacity: 1,\r\n    strokes: objRepeat({ opacity: 0 }, character.strokes.length)\r\n  }, { force: true })]);\r\n};\r\n\r\nvar startUserStroke = function startUserStroke(id, point) {\r\n  return [new Mutation('quiz.activeUserStrokeId', id, { force: true }), new Mutation('userStrokes.' + id, {\r\n    points: [point],\r\n    opacity: 1\r\n  }, { force: true })];\r\n};\r\n\r\nvar updateUserStroke = function updateUserStroke(userStrokeId, points) {\r\n  return [new Mutation('userStrokes.' + userStrokeId + '.points', points, { force: true })];\r\n};\r\n\r\nvar removeUserStroke = function removeUserStroke(userStrokeId, duration) {\r\n  return [new Mutation('userStrokes.' + userStrokeId + '.opacity', 0, { duration: duration }), new Mutation('userStrokes.' + userStrokeId, null, { force: true })];\r\n};\r\n\r\nvar highlightCompleteChar = function highlightCompleteChar(character, color, duration) {\r\n  return [new Mutation('character.highlight.strokeColor', color)].concat(characterActions.hideCharacter('highlight', character)).concat(characterActions.showCharacter('highlight', character, duration / 2)).concat(characterActions.hideCharacter('highlight', character, duration / 2));\r\n};\r\n\r\nmodule.exports = {\r\n  highlightCompleteChar: highlightCompleteChar,\r\n  highlightStroke: characterActions.highlightStroke,\r\n  startQuiz: startQuiz,\r\n  startUserStroke: startUserStroke,\r\n  updateUserStroke: updateUserStroke,\r\n  removeUserStroke: removeUserStroke\r\n};\r\n\r\n/***/ }),\r\n/* 19 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar HanziWriterRenderer = __webpack_require__(20);\r\nvar RenderTarget = __webpack_require__(24);\r\n\r\nmodule.exports = {\r\n  HanziWriterRenderer: HanziWriterRenderer,\r\n  createRenderTarget: RenderTarget.init\r\n};\r\n\r\n/***/ }),\r\n/* 20 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar CharacterRenderer = __webpack_require__(21);\r\nvar UserStrokeRenderer = __webpack_require__(23);\r\n\r\nvar _require = __webpack_require__(0),\r\n    assign = _require.assign;\r\n\r\nvar svg = __webpack_require__(3);\r\n\r\nfunction HanziWriterRenderer(character, positioner) {\r\n  this._character = character;\r\n  this._positioner = positioner;\r\n  this._mainCharRenderer = new CharacterRenderer(character);\r\n  this._outlineCharRenderer = new CharacterRenderer(character);\r\n  this._highlightCharRenderer = new CharacterRenderer(character);\r\n  this._userStrokeRenderers = {};\r\n}\r\n\r\nHanziWriterRenderer.prototype.mount = function (target) {\r\n  var positionedTarget = target.createSubRenderTarget();\r\n  var group = positionedTarget.svg;\r\n  svg.attr(group, 'transform', '\\n    translate(' + this._positioner.xOffset + ', ' + (this._positioner.height - this._positioner.yOffset) + ')\\n    scale(' + this._positioner.scale + ', ' + -1 * this._positioner.scale + ')\\n  ');\r\n  this._outlineCharRenderer.mount(positionedTarget);\r\n  this._mainCharRenderer.mount(positionedTarget);\r\n  this._highlightCharRenderer.mount(positionedTarget);\r\n  this._positionedTarget = positionedTarget;\r\n};\r\n\r\nHanziWriterRenderer.prototype.render = function (props) {\r\n  var _this = this;\r\n\r\n  this._outlineCharRenderer.render({\r\n    opacity: props.character.outline.opacity,\r\n    strokes: props.character.outline.strokes,\r\n    strokeColor: props.options.outlineColor\r\n  });\r\n  this._mainCharRenderer.render({\r\n    opacity: props.character.main.opacity,\r\n    strokes: props.character.main.strokes,\r\n    strokeColor: props.options.strokeColor,\r\n    radicalColor: props.options.radicalColor\r\n  });\r\n  this._highlightCharRenderer.render({\r\n    opacity: props.character.highlight.opacity,\r\n    strokes: props.character.highlight.strokes,\r\n    strokeColor: props.options.highlightColor\r\n  });\r\n\r\n  var userStrokes = props.userStrokes || {};\r\n  Object.keys(this._userStrokeRenderers).forEach(function (userStrokeId) {\r\n    if (!userStrokes[userStrokeId]) {\r\n      _this._userStrokeRenderers[userStrokeId].destroy();\r\n      delete _this._userStrokeRenderers[userStrokeId];\r\n    }\r\n  });\r\n\r\n  Object.keys(userStrokes).forEach(function (userStrokeId) {\r\n    if (!userStrokes[userStrokeId]) return;\r\n    var userStrokeProps = assign({\r\n      strokeWidth: props.options.drawingWidth,\r\n      strokeColor: props.options.drawingColor\r\n    }, userStrokes[userStrokeId]);\r\n    var strokeRenderer = _this._userStrokeRenderers[userStrokeId];\r\n    if (!strokeRenderer) {\r\n      strokeRenderer = new UserStrokeRenderer();\r\n      strokeRenderer.mount(_this._positionedTarget);\r\n      _this._userStrokeRenderers[userStrokeId] = strokeRenderer;\r\n    }\r\n    strokeRenderer.render(userStrokeProps);\r\n  });\r\n};\r\n\r\nHanziWriterRenderer.prototype.destroy = function () {\r\n  svg.removeElm(this._positionedTarget.svg);\r\n  this._positionedTarget.defs.innerHTML = '';\r\n};\r\n\r\nmodule.exports = HanziWriterRenderer;\r\n\r\n/***/ }),\r\n/* 21 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar _require = __webpack_require__(0),\r\n    isMsBrowser = _require.isMsBrowser;\r\n\r\nvar StrokeRenderer = __webpack_require__(22);\r\n\r\nfunction CharacterRenderer(character) {\r\n  this._oldProps = {};\r\n  this._strokeRenderers = character.strokes.map(function (stroke) {\r\n    return new StrokeRenderer(stroke);\r\n  });\r\n}\r\n\r\nCharacterRenderer.prototype.mount = function (target) {\r\n  var subTarget = target.createSubRenderTarget();\r\n  this._group = subTarget.svg;\r\n  this._strokeRenderers.forEach(function (strokeRenderer, i) {\r\n    strokeRenderer.mount(subTarget);\r\n  });\r\n};\r\n\r\nCharacterRenderer.prototype.render = function (props) {\r\n  if (props === this._oldProps) return;\r\n  if (props.opacity !== this._oldProps.opacity) {\r\n    this._group.style.opacity = props.opacity;\r\n    // MS browsers seem to have a bug where if SVG is set to display:none, it sometimes breaks.\r\n    // More info: https://github.com/chanind/hanzi-writer/issues/164\r\n    // this is just a perf improvement, so disable for MS browsers\r\n    if (!isMsBrowser) {\r\n      if (props.opacity === 0) {\r\n        this._group.style.display = 'none';\r\n      } else if (this._oldProps.opacity === 0) {\r\n        this._group.style.removeProperty('display');\r\n      }\r\n    }\r\n  }\r\n  var colorsChanged = !this._oldProps || props.strokeColor !== this._oldProps.strokeColor || props.radicalColor !== this._oldProps.radicalColor;\r\n  if (colorsChanged || props.strokes !== this._oldProps.strokes) {\r\n    for (var i = 0; i < this._strokeRenderers.length; i++) {\r\n      if (!colorsChanged && this._oldProps.strokes && props.strokes[i] === this._oldProps.strokes[i]) continue;\r\n      this._strokeRenderers[i].render({\r\n        strokeColor: props.strokeColor,\r\n        radicalColor: props.radicalColor,\r\n        opacity: props.strokes[i].opacity,\r\n        displayPortion: props.strokes[i].displayPortion\r\n      });\r\n    }\r\n  }\r\n  this._oldProps = props;\r\n};\r\n\r\nmodule.exports = CharacterRenderer;\r\n\r\n/***/ }),\r\n/* 22 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar _require = __webpack_require__(0),\r\n    counter = _require.counter;\r\n\r\nvar svg = __webpack_require__(3);\r\n\r\nvar _require2 = __webpack_require__(2),\r\n    extendStart = _require2.extendStart,\r\n    getPathString = _require2.getPathString;\r\n\r\nvar StrokeRendererBase = __webpack_require__(6);\r\n\r\nvar STROKE_WIDTH = 200;\r\n\r\n// this is a stroke composed of several stroke parts\r\nfunction StrokeRenderer(stroke) {\r\n  this._oldProps = {};\r\n  this._stroke = stroke;\r\n  this._pathLength = stroke.getLength() + STROKE_WIDTH / 2;\r\n}\r\nStrokeRenderer.prototype = Object.create(StrokeRendererBase.prototype);\r\n\r\nStrokeRenderer.prototype.mount = function (target) {\r\n  this._animationPath = svg.createElm('path');\r\n  this._clip = svg.createElm('clipPath');\r\n  this._strokePath = svg.createElm('path');\r\n  var maskId = 'mask-' + counter();\r\n  svg.attr(this._clip, 'id', maskId);\r\n\r\n  svg.attr(this._strokePath, 'd', this._stroke.path);\r\n  this._animationPath.style.opacity = 0;\r\n  svg.attr(this._animationPath, 'clip-path', svg.urlIdRef(maskId));\r\n\r\n  var extendedMaskPoints = extendStart(this._stroke.points, STROKE_WIDTH / 2);\r\n  svg.attr(this._animationPath, 'd', getPathString(extendedMaskPoints));\r\n  svg.attrs(this._animationPath, {\r\n    stroke: '#FFFFFF',\r\n    'stroke-width': STROKE_WIDTH,\r\n    fill: 'none',\r\n    'stroke-linecap': 'round',\r\n    'stroke-linejoin': 'miter',\r\n    'stroke-dasharray': this._pathLength + ',' + this._pathLength\r\n  });\r\n\r\n  this._clip.appendChild(this._strokePath);\r\n  target.defs.appendChild(this._clip);\r\n  target.svg.appendChild(this._animationPath);\r\n  return this;\r\n};\r\n\r\nStrokeRenderer.prototype.render = function (props) {\r\n  if (props === this._oldProps) return;\r\n  if (props.displayPortion !== this._oldProps.displayPortion) {\r\n    this._animationPath.style.strokeDashoffset = this._getStrokeDashoffset(props.displayPortion);\r\n  }\r\n\r\n  var color = this._getColor(props);\r\n  if (color !== this._getColor(this._oldProps)) {\r\n    var r = color.r,\r\n        g = color.g,\r\n        b = color.b,\r\n        a = color.a;\r\n\r\n    svg.attrs(this._animationPath, { stroke: 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')' });\r\n  }\r\n\r\n  if (props.opacity !== this._oldProps.opacity) {\r\n    this._animationPath.style.opacity = props.opacity;\r\n  }\r\n  this._oldProps = props;\r\n};\r\n\r\nmodule.exports = StrokeRenderer;\r\n\r\n/***/ }),\r\n/* 23 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar svg = __webpack_require__(3);\r\n\r\nvar _require = __webpack_require__(2),\r\n    getPathString = _require.getPathString;\r\n\r\nfunction UserStrokeRenderer() {\r\n  this._oldProps = {};\r\n}\r\n\r\nUserStrokeRenderer.prototype.mount = function (target) {\r\n  this._path = svg.createElm('path');\r\n  target.svg.appendChild(this._path);\r\n};\r\n\r\nUserStrokeRenderer.prototype.render = function (props) {\r\n  if (props === this._oldProps) return;\r\n  if (props.strokeColor !== this._oldProps.strokeColor || props.strokeWidth !== this._oldProps.strokeWidth) {\r\n    var _props$strokeColor = props.strokeColor,\r\n        r = _props$strokeColor.r,\r\n        g = _props$strokeColor.g,\r\n        b = _props$strokeColor.b,\r\n        a = _props$strokeColor.a;\r\n\r\n    svg.attrs(this._path, {\r\n      fill: 'none',\r\n      stroke: 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')',\r\n      'stroke-width': props.strokeWidth,\r\n      'stroke-linecap': 'round',\r\n      'stroke-linejoin': 'round'\r\n    });\r\n  }\r\n  if (props.opacity !== this._oldProps.opacity) {\r\n    svg.attr(this._path, 'opacity', props.opacity);\r\n  }\r\n  if (props.points !== this._oldProps.points) {\r\n    svg.attr(this._path, 'd', getPathString(props.points));\r\n  }\r\n  this._oldProps = props;\r\n};\r\n\r\nUserStrokeRenderer.prototype.destroy = function () {\r\n  svg.removeElm(this._path);\r\n};\r\n\r\nmodule.exports = UserStrokeRenderer;\r\n\r\n/***/ }),\r\n/* 24 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n/* WEBPACK VAR INJECTION */(function(global) {\r\n\r\nvar _require = __webpack_require__(3),\r\n    createElm = _require.createElm,\r\n    attrs = _require.attrs;\r\n\r\nvar RenderTargetBase = __webpack_require__(7);\r\n\r\nfunction RenderTarget(svg, defs) {\r\n  this.svg = svg;\r\n  this.defs = defs;\r\n  this.node = svg;\r\n\r\n  if (this.node.createSVGPoint) {\r\n    this._pt = this.node.createSVGPoint();\r\n  }\r\n}\r\nRenderTarget.prototype = Object.create(RenderTargetBase.prototype);\r\n\r\nRenderTarget.prototype.createSubRenderTarget = function () {\r\n  var group = createElm('g');\r\n  this.svg.appendChild(group);\r\n  return new RenderTarget(group, this.defs);\r\n};\r\n\r\nRenderTarget.prototype._getMousePoint = function (evt) {\r\n  if (this._pt) {\r\n    this._pt.x = evt.clientX;\r\n    this._pt.y = evt.clientY;\r\n    var localPt = this._pt.matrixTransform(this.node.getScreenCTM().inverse());\r\n    return { x: localPt.x, y: localPt.y };\r\n  }\r\n  return RenderTargetBase.prototype._getMousePoint.call(this, evt);\r\n};\r\n\r\nRenderTarget.prototype._getTouchPoint = function (evt) {\r\n  if (this._pt) {\r\n    this._pt.x = evt.touches[0].clientX;\r\n    this._pt.y = evt.touches[0].clientY;\r\n    var localPt = this._pt.matrixTransform(this.node.getScreenCTM().inverse());\r\n    return { x: localPt.x, y: localPt.y };\r\n  }\r\n  return RenderTargetBase.prototype._getTouchPoint.call(this, evt);\r\n};\r\n\r\nRenderTarget.init = function (elmOrId) {\r\n  var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '100%';\r\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '100%';\r\n\r\n  var svg = void 0;\r\n  var elm = elmOrId;\r\n  if (typeof elmOrId === 'string') {\r\n    elm = global.document.getElementById(elmOrId);\r\n  }\r\n  if (!elm) {\r\n    throw new Error('HanziWriter target element not found: ' + elmOrId);\r\n  }\r\n  var nodeType = elm.nodeName.toUpperCase();\r\n  if (nodeType === 'SVG' || nodeType === 'G') {\r\n    svg = elm;\r\n  } else {\r\n    svg = createElm('svg');\r\n    elm.appendChild(svg);\r\n  }\r\n  attrs(svg, { width: width, height: height });\r\n  var defs = createElm('defs');\r\n  svg.appendChild(defs);\r\n  return new RenderTarget(svg, defs);\r\n};\r\n\r\nmodule.exports = RenderTarget;\r\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\r\n\r\n/***/ }),\r\n/* 25 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar HanziWriterRenderer = __webpack_require__(26);\r\nvar RenderTarget = __webpack_require__(30);\r\n\r\nmodule.exports = {\r\n  HanziWriterRenderer: HanziWriterRenderer,\r\n  createRenderTarget: RenderTarget.init\r\n};\r\n\r\n/***/ }),\r\n/* 26 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar CharacterRenderer = __webpack_require__(27);\r\nvar renderUserStroke = __webpack_require__(29);\r\n\r\nvar _require = __webpack_require__(0),\r\n    assign = _require.assign;\r\n\r\nfunction HanziWriterRenderer(character, positioner) {\r\n  this._character = character;\r\n  this._positioner = positioner;\r\n  this._mainCharRenderer = new CharacterRenderer(character);\r\n  this._outlineCharRenderer = new CharacterRenderer(character);\r\n  this._highlightCharRenderer = new CharacterRenderer(character);\r\n}\r\n\r\nHanziWriterRenderer.prototype.mount = function (target) {\r\n  this._target = target;\r\n};\r\n\r\nHanziWriterRenderer.prototype._animationFrame = function (func) {\r\n  var ctx = this._target.getContext();\r\n  ctx.clearRect(0, 0, this._positioner.width, this._positioner.height);\r\n\r\n  ctx.save();\r\n  ctx.translate(this._positioner.xOffset, this._positioner.height - this._positioner.yOffset);\r\n  ctx.transform(1, 0, 0, -1, 0, 0);\r\n  ctx.scale(this._positioner.scale, this._positioner.scale);\r\n  func(ctx);\r\n  ctx.restore();\r\n  if (ctx.draw) ctx.draw();\r\n};\r\n\r\nHanziWriterRenderer.prototype.render = function (props) {\r\n  var _this = this;\r\n\r\n  this._animationFrame(function (ctx) {\r\n    _this._outlineCharRenderer.render(ctx, {\r\n      opacity: props.character.outline.opacity,\r\n      strokes: props.character.outline.strokes,\r\n      strokeColor: props.options.outlineColor\r\n    });\r\n    _this._mainCharRenderer.render(ctx, {\r\n      opacity: props.character.main.opacity,\r\n      strokes: props.character.main.strokes,\r\n      strokeColor: props.options.strokeColor,\r\n      radicalColor: props.options.radicalColor\r\n    });\r\n    _this._highlightCharRenderer.render(ctx, {\r\n      opacity: props.character.highlight.opacity,\r\n      strokes: props.character.highlight.strokes,\r\n      strokeColor: props.options.highlightColor\r\n    });\r\n\r\n    var userStrokes = props.userStrokes || {};\r\n    Object.keys(userStrokes).forEach(function (userStrokeId) {\r\n      if (userStrokes[userStrokeId]) {\r\n        var userStrokeProps = assign({\r\n          strokeWidth: props.options.drawingWidth,\r\n          strokeColor: props.options.drawingColor\r\n        }, userStrokes[userStrokeId]);\r\n        renderUserStroke(ctx, userStrokeProps);\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nHanziWriterRenderer.prototype.destroy = function () {};\r\n\r\nmodule.exports = HanziWriterRenderer;\r\n\r\n/***/ }),\r\n/* 27 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar StrokeRenderer = __webpack_require__(28);\r\n\r\nfunction CharacterRenderer(character) {\r\n  this._strokeRenderers = character.strokes.map(function (stroke) {\r\n    return new StrokeRenderer(stroke);\r\n  });\r\n}\r\n\r\nCharacterRenderer.prototype.render = function (ctx, props) {\r\n  if (props.opacity < 0.05) return;\r\n  for (var i = 0; i < this._strokeRenderers.length; i++) {\r\n    this._strokeRenderers[i].render(ctx, {\r\n      strokeColor: props.strokeColor,\r\n      radicalColor: props.radicalColor,\r\n      opacity: props.strokes[i].opacity * props.opacity,\r\n      displayPortion: props.strokes[i].displayPortion\r\n    });\r\n  }\r\n};\r\n\r\nmodule.exports = CharacterRenderer;\r\n\r\n/***/ }),\r\n/* 28 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n/* WEBPACK VAR INJECTION */(function(global) {\r\n\r\nvar _require = __webpack_require__(2),\r\n    extendStart = _require.extendStart;\r\n\r\nvar _require2 = __webpack_require__(8),\r\n    drawPath = _require2.drawPath,\r\n    pathStringToCanvas = _require2.pathStringToCanvas;\r\n\r\nvar StrokeRendererBase = __webpack_require__(6);\r\n\r\nvar STROKE_WIDTH = 200;\r\n\r\n// this is a stroke composed of several stroke parts\r\nfunction StrokeRenderer(stroke) {\r\n  var usePath2D = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\r\n\r\n  this._stroke = stroke;\r\n  this._pathLength = stroke.getLength() + STROKE_WIDTH / 2;\r\n  if (usePath2D && global.Path2D) {\r\n    this._path2D = new global.Path2D(this._stroke.path);\r\n  } else {\r\n    this._pathCmd = pathStringToCanvas(this._stroke.path);\r\n  }\r\n  this._extendedMaskPoints = extendStart(this._stroke.points, STROKE_WIDTH / 2);\r\n}\r\nStrokeRenderer.prototype = Object.create(StrokeRendererBase.prototype);\r\n\r\nStrokeRenderer.prototype.render = function (ctx, props) {\r\n  if (props.opacity < 0.05) return;\r\n\r\n  ctx.save();\r\n  if (this._path2D) {\r\n    ctx.clip(this._path2D);\r\n  } else {\r\n    this._pathCmd(ctx);\r\n    // wechat bugs out if the clip path isn't stroked or filled\r\n    ctx.globalAlpha = 0;\r\n    ctx.stroke();\r\n    ctx.clip();\r\n  }\r\n\r\n  var _getColor = this._getColor(props),\r\n      r = _getColor.r,\r\n      g = _getColor.g,\r\n      b = _getColor.b,\r\n      a = _getColor.a;\r\n\r\n  var color = a === 1 ? 'rgb(' + r + ',' + g + ',' + b + ')' : 'rgb(' + r + ',' + g + ',' + b + ',' + a + ')';\r\n  var dashOffset = this._getStrokeDashoffset(props.displayPortion);\r\n  ctx.globalAlpha = props.opacity;\r\n  ctx.strokeStyle = color;\r\n  ctx.fillStyle = color;\r\n  ctx.lineWidth = STROKE_WIDTH;\r\n  ctx.lineCap = 'round';\r\n  ctx.lineJoin = 'round';\r\n  // wechat sets dashOffset as a second param here. Should be harmless for browsers to add here too\r\n  ctx.setLineDash([this._pathLength, this._pathLength], dashOffset);\r\n  ctx.lineDashOffset = dashOffset;\r\n  drawPath(ctx, this._extendedMaskPoints);\r\n\r\n  ctx.restore();\r\n};\r\n\r\nmodule.exports = StrokeRenderer;\r\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\r\n\r\n/***/ }),\r\n/* 29 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar _require = __webpack_require__(8),\r\n    drawPath = _require.drawPath;\r\n\r\nmodule.exports = function (ctx, props) {\r\n  if (props.opacity < 0.05) return;\r\n  var _props$strokeColor = props.strokeColor,\r\n      r = _props$strokeColor.r,\r\n      g = _props$strokeColor.g,\r\n      b = _props$strokeColor.b,\r\n      a = _props$strokeColor.a;\r\n\r\n\r\n  ctx.save();\r\n  ctx.globalAlpha = props.opacity;\r\n  ctx.lineWidth = props.strokeWidth;\r\n  ctx.strokeStyle = 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\r\n  ctx.lineCap = 'round';\r\n  ctx.lineJoin = 'round';\r\n  drawPath(ctx, props.points);\r\n  ctx.restore();\r\n};\r\n\r\n/***/ }),\r\n/* 30 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n/* WEBPACK VAR INJECTION */(function(global) {\r\n\r\nvar RenderTargetBase = __webpack_require__(7);\r\n\r\nfunction RenderTarget(canvas) {\r\n  this.node = canvas;\r\n}\r\nRenderTarget.prototype = Object.create(RenderTargetBase.prototype);\r\n\r\nRenderTarget.prototype.getContext = function () {\r\n  return this.node.getContext('2d');\r\n};\r\n\r\nRenderTarget.init = function (elmOrId) {\r\n  var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '100%';\r\n  var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '100%';\r\n\r\n  var canvas = void 0;\r\n  var elm = elmOrId;\r\n  if (typeof elmOrId === 'string') {\r\n    elm = global.document.getElementById(elmOrId);\r\n  }\r\n  if (!elm) {\r\n    throw new Error('HanziWriter target element not found: ' + elmOrId);\r\n  }\r\n  var nodeType = elm.nodeName.toUpperCase();\r\n  if (nodeType === 'CANVAS') {\r\n    canvas = elm;\r\n  } else {\r\n    canvas = global.document.createElement('canvas');\r\n    elm.appendChild(canvas);\r\n  }\r\n  canvas.setAttribute('width', width);\r\n  canvas.setAttribute('height', height);\r\n  return new RenderTarget(canvas);\r\n};\r\n\r\nmodule.exports = RenderTarget;\r\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\r\n\r\n/***/ }),\r\n/* 31 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n/* WEBPACK VAR INJECTION */(function(global) {\r\n\r\nvar VERSION = '2.0';\r\nvar getCharDataUrl = function getCharDataUrl(char) {\r\n  return 'https://cdn.jsdelivr.net/npm/hanzi-writer-data@' + VERSION + '/' + char + '.json';\r\n};\r\n\r\nmodule.exports = function (char, onLoad, onError) {\r\n  // load char data from hanziwriter cdn (currently hosted on jsdelivr)\r\n  var xhr = new global.XMLHttpRequest();\r\n  if (xhr.overrideMimeType) {\r\n    // IE 9 and 10 don't seem to support this...\r\n    xhr.overrideMimeType('application/json');\r\n  }\r\n  xhr.open('GET', getCharDataUrl(char), true);\r\n  xhr.onerror = function (event) {\r\n    onError(xhr, event);\r\n  };\r\n  xhr.onreadystatechange = function () {\r\n    // TODO: error handling\r\n    if (xhr.readyState !== 4) return;\r\n\r\n    if (xhr.status === 200) {\r\n      onLoad(JSON.parse(xhr.responseText));\r\n    } else if (xhr.status !== 0 && onError) {\r\n      onError(xhr);\r\n    }\r\n  };\r\n  xhr.send(null);\r\n};\r\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\r\n\r\n/***/ }),\r\n/* 32 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\n\r\n\r\nvar _require = __webpack_require__(0),\r\n    callIfExists = _require.callIfExists;\r\n\r\nfunction LoadingManager(options) {\r\n  this._loadCounter = 0;\r\n  this._options = options;\r\n  this._isLoading = false;\r\n\r\n  // use this to attribute to determine if there was a problem with loading\r\n  this.loadingFailed = false;\r\n}\r\n\r\nLoadingManager.prototype._debouncedLoad = function (char, count) {\r\n  var _this = this;\r\n\r\n  // these wrappers ignore all responses except the most recent.\r\n  var wrappedResolve = function wrappedResolve(data) {\r\n    if (count === _this._loadCounter) _this._resolve(data);\r\n  };\r\n  var wrappedReject = function wrappedReject(reason) {\r\n    if (count === _this._loadCounter) _this._reject(reason);\r\n  };\r\n\r\n  var returnedData = this._options.charDataLoader(char, wrappedResolve, wrappedReject);\r\n  if (returnedData) wrappedResolve(returnedData);\r\n};\r\n\r\nLoadingManager.prototype._setupLoadingPromise = function () {\r\n  var _this2 = this;\r\n\r\n  return new Promise(function (resolve, reject) {\r\n    _this2._resolve = resolve;\r\n    _this2._reject = reject;\r\n  }).then(function (data) {\r\n    _this2._isLoading = false;\r\n    callIfExists(_this2._options.onLoadCharDataSuccess, data);\r\n    return data;\r\n  }, function (reason) {\r\n    _this2._isLoading = false;\r\n    _this2.loadingFailed = true;\r\n    callIfExists(_this2._options.onLoadCharDataError, reason);\r\n    // If error callback wasn't provided, throw an error so the developer will be aware something went wrong\r\n    if (!_this2._options.onLoadCharDataError) {\r\n      if (reason instanceof Error) throw reason;\r\n      var err = new Error('Failed to load char data for ' + _this2._loadingChar);\r\n      err.reason = reason;\r\n      throw err;\r\n    }\r\n  });\r\n};\r\n\r\nLoadingManager.prototype.loadCharData = function (char) {\r\n  this._loadingChar = char;\r\n  var promise = this._setupLoadingPromise();\r\n  this.loadingFailed = false;\r\n  this._isLoading = true;\r\n  this._loadCounter++;\r\n  this._debouncedLoad(char, this._loadCounter);\r\n  return promise;\r\n};\r\n\r\nmodule.exports = LoadingManager;\r\n\r\n/***/ })\r\n/******/ ]);\r\n});"]}